{"timestamp":"2025-09-14 09:27:57.883","level":"ERROR","service":"api-gateway","message":"Callback handling failed","version":"0.0.1","environment":"development","action":"callback_failed","traceId":"36b8c9966589850855030a453dd2581a","error":{"name":"Error","message":"Invalid access token received from Authentik","stack":"Error: Invalid access token received from Authentik\n    at TokenService.exchangeCodeForTokens (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/token.service.ts:56:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async <anonymous> (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/auth.service.ts:144:18)\n    at async <anonymous> (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/tracing/trace.service.ts:46:16)\n    at async TraceService.withSpan (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/tracing/trace.service.ts:45:22)\n    at async <anonymous> (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/auth.service.ts:139:38)\n    at async <anonymous> (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/tracing/trace.service.ts:46:16)\n    at async TraceService.withSpan (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/tracing/trace.service.ts:45:22)\n    at async AuthService.handleCallback (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/auth.service.ts:114:12)\n    at async AuthController.handleCallback (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/auth.controller.ts:37:20)"},"trace_id":"36b8c9966589850855030a453dd2581a","span_id":"8475c9962e6e492f","trace_flags":"01"}
{"timestamp":"2025-09-14 09:28:01.168","level":"ERROR","service":"api-gateway","message":"Callback handling failed","version":"0.0.1","environment":"development","action":"callback_failed","traceId":"d1a714531cf8bb8989d39289ba77705e","error":{"name":"Error","message":"Token exchange failed: {\"error\":\"invalid_grant\",\"error_description\":\"The provided authorization grant or refresh token is invalid, expired, revoked, does not match the redirection URI used in the authorization request, or was issued to another client\",\"request_id\":\"7a247aa8dbef48108c2969e269a21596\"}","stack":"Error: Token exchange failed: {\"error\":\"invalid_grant\",\"error_description\":\"The provided authorization grant or refresh token is invalid, expired, revoked, does not match the redirection URI used in the authorization request, or was issued to another client\",\"request_id\":\"7a247aa8dbef48108c2969e269a21596\"}\n    at AuthentikService.exchangeCodeForTokens (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/authentik.service.ts:130:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async TokenService.exchangeCodeForTokens (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/token.service.ts:40:22)\n    at async <anonymous> (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/auth.service.ts:144:18)\n    at async <anonymous> (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/tracing/trace.service.ts:46:16)\n    at async TraceService.withSpan (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/tracing/trace.service.ts:45:22)\n    at async <anonymous> (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/auth.service.ts:139:38)\n    at async <anonymous> (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/tracing/trace.service.ts:46:16)\n    at async TraceService.withSpan (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/tracing/trace.service.ts:45:22)\n    at async AuthService.handleCallback (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/auth.service.ts:114:12)"},"trace_id":"d1a714531cf8bb8989d39289ba77705e","span_id":"95f47e32b7005eba","trace_flags":"01"}
{"timestamp":"2025-09-14 09:28:02.742","level":"ERROR","service":"api-gateway","message":"Callback handling failed","version":"0.0.1","environment":"development","action":"callback_failed","traceId":"d8df9d54b390df31cf1c77488ec61de4","error":{"name":"Error","message":"Token exchange failed: {\"error\":\"invalid_grant\",\"error_description\":\"The provided authorization grant or refresh token is invalid, expired, revoked, does not match the redirection URI used in the authorization request, or was issued to another client\",\"request_id\":\"3b7f455593944e06a79069d4dbd405b3\"}","stack":"Error: Token exchange failed: {\"error\":\"invalid_grant\",\"error_description\":\"The provided authorization grant or refresh token is invalid, expired, revoked, does not match the redirection URI used in the authorization request, or was issued to another client\",\"request_id\":\"3b7f455593944e06a79069d4dbd405b3\"}\n    at AuthentikService.exchangeCodeForTokens (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/authentik.service.ts:130:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async TokenService.exchangeCodeForTokens (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/token.service.ts:40:22)\n    at async <anonymous> (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/auth.service.ts:144:18)\n    at async <anonymous> (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/tracing/trace.service.ts:46:16)\n    at async TraceService.withSpan (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/tracing/trace.service.ts:45:22)\n    at async <anonymous> (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/auth.service.ts:139:38)\n    at async <anonymous> (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/tracing/trace.service.ts:46:16)\n    at async TraceService.withSpan (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/tracing/trace.service.ts:45:22)\n    at async AuthService.handleCallback (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/auth.service.ts:114:12)"},"trace_id":"d8df9d54b390df31cf1c77488ec61de4","span_id":"bd70ae2e68469fac","trace_flags":"01"}
{"timestamp":"2025-09-14 09:28:04.201","level":"ERROR","service":"api-gateway","message":"Callback handling failed","version":"0.0.1","environment":"development","action":"callback_failed","traceId":"05a603da26bbda12258ff00d7b0670f0","error":{"name":"Error","message":"Token exchange failed: {\"error\":\"invalid_grant\",\"error_description\":\"The provided authorization grant or refresh token is invalid, expired, revoked, does not match the redirection URI used in the authorization request, or was issued to another client\",\"request_id\":\"038f0826b55149638c5850f64cb0fab6\"}","stack":"Error: Token exchange failed: {\"error\":\"invalid_grant\",\"error_description\":\"The provided authorization grant or refresh token is invalid, expired, revoked, does not match the redirection URI used in the authorization request, or was issued to another client\",\"request_id\":\"038f0826b55149638c5850f64cb0fab6\"}\n    at AuthentikService.exchangeCodeForTokens (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/authentik.service.ts:130:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async TokenService.exchangeCodeForTokens (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/token.service.ts:40:22)\n    at async <anonymous> (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/auth.service.ts:144:18)\n    at async <anonymous> (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/tracing/trace.service.ts:46:16)\n    at async TraceService.withSpan (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/tracing/trace.service.ts:45:22)\n    at async <anonymous> (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/auth.service.ts:139:38)\n    at async <anonymous> (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/tracing/trace.service.ts:46:16)\n    at async TraceService.withSpan (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/tracing/trace.service.ts:45:22)\n    at async AuthService.handleCallback (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/auth.service.ts:114:12)"},"trace_id":"05a603da26bbda12258ff00d7b0670f0","span_id":"9b0a8b72bfdba29a","trace_flags":"01"}
{"timestamp":"2025-09-14 09:29:19.917","level":"ERROR","service":"api-gateway","message":"Callback handling failed","version":"0.0.1","environment":"development","action":"callback_failed","traceId":"d6a4f568468e27610038fb20ea480759","error":{"name":"Error","message":"Invalid access token received from Authentik","stack":"Error: Invalid access token received from Authentik\n    at TokenService.exchangeCodeForTokens (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/token.service.ts:56:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async <anonymous> (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/auth.service.ts:144:18)\n    at async <anonymous> (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/tracing/trace.service.ts:46:16)\n    at async TraceService.withSpan (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/tracing/trace.service.ts:45:22)\n    at async <anonymous> (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/auth.service.ts:139:38)\n    at async <anonymous> (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/tracing/trace.service.ts:46:16)\n    at async TraceService.withSpan (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/tracing/trace.service.ts:45:22)\n    at async AuthService.handleCallback (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/auth.service.ts:114:12)\n    at async AuthController.handleCallback (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/auth.controller.ts:37:20)"},"trace_id":"d6a4f568468e27610038fb20ea480759","span_id":"88b6c09b513a100a","trace_flags":"01"}
{"timestamp":"2025-09-14 09:29:28.889","level":"ERROR","service":"api-gateway","message":"Callback handling failed","version":"0.0.1","environment":"development","action":"callback_failed","traceId":"896578eea28ddb02e490559eca57cd18","error":{"name":"Error","message":"Invalid access token received from Authentik","stack":"Error: Invalid access token received from Authentik\n    at TokenService.exchangeCodeForTokens (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/token.service.ts:56:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async <anonymous> (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/auth.service.ts:144:18)\n    at async <anonymous> (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/tracing/trace.service.ts:46:16)\n    at async TraceService.withSpan (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/tracing/trace.service.ts:45:22)\n    at async <anonymous> (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/auth.service.ts:139:38)\n    at async <anonymous> (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/tracing/trace.service.ts:46:16)\n    at async TraceService.withSpan (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/tracing/trace.service.ts:45:22)\n    at async AuthService.handleCallback (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/auth.service.ts:114:12)\n    at async AuthController.handleCallback (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/auth.controller.ts:37:20)"},"trace_id":"896578eea28ddb02e490559eca57cd18","span_id":"cac08873db483765","trace_flags":"01"}
{"timestamp":"2025-09-14 09:42:44.413","level":"ERROR","service":"api-gateway","message":"Callback handling failed","version":"0.0.1","environment":"development","action":"callback_failed","traceId":"33afc53a082176e5fac10182c574546f","error":{"name":"Error","message":"Invalid access token received from Authentik","stack":"Error: Invalid access token received from Authentik\n    at TokenService.exchangeCodeForTokens (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/token.service.ts:56:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async <anonymous> (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/auth.service.ts:144:18)\n    at async <anonymous> (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/tracing/trace.service.ts:46:16)\n    at async TraceService.withSpan (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/tracing/trace.service.ts:45:22)\n    at async <anonymous> (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/auth.service.ts:139:38)\n    at async <anonymous> (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/tracing/trace.service.ts:46:16)\n    at async TraceService.withSpan (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/tracing/trace.service.ts:45:22)\n    at async AuthService.handleCallback (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/auth.service.ts:114:12)\n    at async AuthController.handleCallback (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/auth.controller.ts:37:20)"},"trace_id":"33afc53a082176e5fac10182c574546f","span_id":"300512a548848a9a","trace_flags":"01"}
{"timestamp":"2025-09-14 09:46:50.900","level":"ERROR","service":"api-gateway","message":"Callback handling failed","version":"0.0.1","environment":"development","action":"callback_failed","traceId":"708184cbebd6646ae3620cf0df88b9ae","error":{"name":"Error","message":"Invalid access token received from Authentik","stack":"Error: Invalid access token received from Authentik\n    at TokenService.exchangeCodeForTokens (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/token.service.ts:56:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async <anonymous> (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/auth.service.ts:144:18)\n    at async <anonymous> (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/tracing/trace.service.ts:46:16)\n    at async TraceService.withSpan (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/tracing/trace.service.ts:45:22)\n    at async <anonymous> (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/auth.service.ts:139:38)\n    at async <anonymous> (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/tracing/trace.service.ts:46:16)\n    at async TraceService.withSpan (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/tracing/trace.service.ts:45:22)\n    at async AuthService.handleCallback (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/auth.service.ts:114:12)\n    at async AuthController.handleCallback (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/auth.controller.ts:37:20)"},"trace_id":"708184cbebd6646ae3620cf0df88b9ae","span_id":"7751a128a875f2c4","trace_flags":"01"}
