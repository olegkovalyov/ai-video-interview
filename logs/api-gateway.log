{"timestamp":"2025-09-08 11:45:00.623","level":"INFO","service":"api-gateway","message":"ðŸš€ API Gateway starting up","version":"0.0.1","environment":"development","action":"startup","port":3002,"corsOrigin":"http://localhost:3000","nodeEnv":"development"}
{"timestamp":"2025-09-08 11:45:00.629","level":"INFO","service":"api-gateway","message":"âœ… API Gateway successfully started","version":"0.0.1","environment":"development","action":"startup_complete","port":3002,"url":"http://localhost:3002","features":["authentication","tracing","metrics","kafka_events"]}
{"timestamp":"2025-09-08 11:49:30.474","level":"INFO","service":"api-gateway","message":"Auth: login_initiation","version":"0.0.1","environment":"development","action":"login_initiation","redirectUri":"http://localhost:3000/auth/callback","traceId":"cd79bab8f9c3952fbb9def1e2b9112d3","category":"authentication","trace_id":"cd79bab8f9c3952fbb9def1e2b9112d3","span_id":"471639cc28528a5f","trace_flags":"01"}
{"timestamp":"2025-09-08 11:49:31.282","level":"INFO","service":"api-gateway","message":"Auth: callback_processing","version":"0.0.1","environment":"development","action":"callback_processing","redirectUri":"http://localhost:3000/auth/callback","code":"present","traceId":"c1df442a805a35690d90a698642c11d3","category":"authentication","trace_id":"c1df442a805a35690d90a698642c11d3","span_id":"de220d10b85ac8ae","trace_flags":"01"}
{"timestamp":"2025-09-08 11:49:31.958","level":"INFO","service":"api-gateway","message":"Kafka: publish to auth_events success","version":"0.0.1","environment":"development","userId":"b1121316386326fcbdf65b22d2fedc636dace449c8e16daa6d9ac680d9223142","authMethod":"oauth2","traceId":"c1df442a805a35690d90a698642c11d3","category":"kafka","action":"publish","topic":"auth_events","success":true,"trace_id":"c1df442a805a35690d90a698642c11d3","span_id":"fe5815122593855e","trace_flags":"01"}
{"timestamp":"2025-09-08 12:04:35.876","level":"INFO","service":"api-gateway","message":"ðŸš€ API Gateway starting up","version":"0.0.1","environment":"development","action":"startup","port":3002,"corsOrigin":"http://localhost:3000","nodeEnv":"development"}
{"timestamp":"2025-09-08 12:04:35.882","level":"INFO","service":"api-gateway","message":"âœ… API Gateway successfully started","version":"0.0.1","environment":"development","action":"startup_complete","port":3002,"url":"http://localhost:3002","features":["authentication","tracing","metrics","kafka_events"]}
{"timestamp":"2025-09-08 12:05:22.294","level":"INFO","service":"api-gateway","message":"ðŸš€ API Gateway starting up","version":"0.0.1","environment":"development","action":"startup","port":3002,"corsOrigin":"http://localhost:3000","nodeEnv":"development"}
{"timestamp":"2025-09-08 12:05:22.300","level":"INFO","service":"api-gateway","message":"âœ… API Gateway successfully started","version":"0.0.1","environment":"development","action":"startup_complete","port":3002,"url":"http://localhost:3002","features":["authentication","tracing","metrics","kafka_events"]}
{"timestamp":"2025-09-08 12:11:45.558","level":"INFO","service":"api-gateway","message":"Auth: logout_success","version":"0.0.1","environment":"development","action":"logout_success","category":"authentication","trace_id":"abcedf88a006d9d92cc0624e5e1525a5","span_id":"ad9f9d57f07363fe","trace_flags":"01"}
{"timestamp":"2025-09-08 12:11:49.361","level":"INFO","service":"api-gateway","message":"Auth: login_initiation","version":"0.0.1","environment":"development","action":"login_initiation","redirectUri":"http://localhost:3000/auth/callback","traceId":"43eb0d75f2dbf3e47a184d961ca40928","category":"authentication","trace_id":"43eb0d75f2dbf3e47a184d961ca40928","span_id":"8512a510c15310ee","trace_flags":"01"}
{"timestamp":"2025-09-08 12:11:49.930","level":"INFO","service":"api-gateway","message":"Auth: callback_processing","version":"0.0.1","environment":"development","action":"callback_processing","redirectUri":"http://localhost:3000/auth/callback","code":"present","traceId":"abfb92f1b83eed4d1ffd6e18319ee12c","category":"authentication","trace_id":"abfb92f1b83eed4d1ffd6e18319ee12c","span_id":"1c8aa62b2963d4bf","trace_flags":"01"}
{"timestamp":"2025-09-08 12:11:50.341","level":"INFO","service":"api-gateway","message":"Kafka: publish to auth_events success","version":"0.0.1","environment":"development","userId":"b1121316386326fcbdf65b22d2fedc636dace449c8e16daa6d9ac680d9223142","authMethod":"oauth2","traceId":"abfb92f1b83eed4d1ffd6e18319ee12c","category":"kafka","action":"publish","topic":"auth_events","success":true,"trace_id":"abfb92f1b83eed4d1ffd6e18319ee12c","span_id":"3258e3ca3b4aa246","trace_flags":"01"}
{"timestamp":"2025-09-08 12:32:35.073","level":"INFO","service":"api-gateway","message":"Auth: logout_success","version":"0.0.1","environment":"development","action":"logout_success","category":"authentication","trace_id":"47e406b8f45fd119ae30843bd0e99f15","span_id":"87e28aa84466b147","trace_flags":"01"}
{"timestamp":"2025-09-08 12:33:26.866","level":"INFO","service":"api-gateway","message":"Auth: login_initiation","version":"0.0.1","environment":"development","action":"login_initiation","redirectUri":"http://localhost:3000/auth/callback","traceId":"0ddeaae364120038d4d91b7aba77be15","category":"authentication","trace_id":"0ddeaae364120038d4d91b7aba77be15","span_id":"107c5b3a52ffa20b","trace_flags":"01"}
{"timestamp":"2025-09-08 12:33:27.489","level":"INFO","service":"api-gateway","message":"Auth: callback_processing","version":"0.0.1","environment":"development","action":"callback_processing","redirectUri":"http://localhost:3000/auth/callback","code":"present","traceId":"d4d7298492d17eff83704b8a8248d927","category":"authentication","trace_id":"d4d7298492d17eff83704b8a8248d927","span_id":"7032321d2bc95694","trace_flags":"01"}
{"timestamp":"2025-09-08 12:33:27.895","level":"INFO","service":"api-gateway","message":"Kafka: publish to auth_events success","version":"0.0.1","environment":"development","userId":"b1121316386326fcbdf65b22d2fedc636dace449c8e16daa6d9ac680d9223142","authMethod":"oauth2","traceId":"d4d7298492d17eff83704b8a8248d927","category":"kafka","action":"publish","topic":"auth_events","success":true,"trace_id":"d4d7298492d17eff83704b8a8248d927","span_id":"aa2ecf95e28c4e2a","trace_flags":"01"}
{"timestamp":"2025-09-08 12:33:38.119","level":"INFO","service":"api-gateway","message":"Auth: logout_success","version":"0.0.1","environment":"development","action":"logout_success","category":"authentication","trace_id":"c29ea6bdd11673dca74d2d694e176c70","span_id":"a343369c7d4d708d","trace_flags":"01"}
{"timestamp":"2025-09-08 12:33:52.723","level":"WARN","service":"api-gateway","message":"No refresh token found in body or cookies","version":"0.0.1","environment":"development","action":"refresh_token_missing","trace_id":"13fcb2d6af93de949f7e3e463a741615","span_id":"6c2e620d1d106b2d","trace_flags":"01"}
{"timestamp":"2025-09-08 12:33:55.565","level":"INFO","service":"api-gateway","message":"Auth: login_initiation","version":"0.0.1","environment":"development","action":"login_initiation","redirectUri":"http://localhost:3000/auth/callback","traceId":"400ed51b144dbbe8f3085b4ea2c7d28b","category":"authentication","trace_id":"400ed51b144dbbe8f3085b4ea2c7d28b","span_id":"f1cb8c4a06d0fd59","trace_flags":"01"}
{"timestamp":"2025-09-08 12:33:55.992","level":"INFO","service":"api-gateway","message":"Auth: callback_processing","version":"0.0.1","environment":"development","action":"callback_processing","redirectUri":"http://localhost:3000/auth/callback","code":"present","traceId":"0e913a80a0e48da0b0c2643d20568a60","category":"authentication","trace_id":"0e913a80a0e48da0b0c2643d20568a60","span_id":"597938780741a47d","trace_flags":"01"}
{"timestamp":"2025-09-08 12:33:56.181","level":"INFO","service":"api-gateway","message":"Kafka: publish to auth_events success","version":"0.0.1","environment":"development","userId":"b1121316386326fcbdf65b22d2fedc636dace449c8e16daa6d9ac680d9223142","authMethod":"oauth2","traceId":"0e913a80a0e48da0b0c2643d20568a60","category":"kafka","action":"publish","topic":"auth_events","success":true,"trace_id":"0e913a80a0e48da0b0c2643d20568a60","span_id":"b48fde30de381fca","trace_flags":"01"}
{"timestamp":"2025-09-10 10:02:33.988","level":"INFO","service":"api-gateway","message":"Auth: login_initiation","version":"0.0.1","environment":"development","action":"login_initiation","redirectUri":"http://localhost:3000/auth/callback","traceId":"8f8cc88aa90c11414edd2cd04b466f59","category":"authentication","trace_id":"8f8cc88aa90c11414edd2cd04b466f59","span_id":"87ab28de9c576a70","trace_flags":"01"}
{"timestamp":"2025-09-10 10:02:34.607","level":"INFO","service":"api-gateway","message":"Auth: callback_processing","version":"0.0.1","environment":"development","action":"callback_processing","redirectUri":"http://localhost:3000/auth/callback","code":"present","traceId":"2eab2547aaf5da7b14ed1721dcc288c5","category":"authentication","trace_id":"2eab2547aaf5da7b14ed1721dcc288c5","span_id":"5b3b158ccd4576ee","trace_flags":"01"}
{"timestamp":"2025-09-10 10:02:35.042","level":"INFO","service":"api-gateway","message":"Kafka: publish to auth_events success","version":"0.0.1","environment":"development","userId":"b1121316386326fcbdf65b22d2fedc636dace449c8e16daa6d9ac680d9223142","authMethod":"oauth2","traceId":"2eab2547aaf5da7b14ed1721dcc288c5","category":"kafka","action":"publish","topic":"auth_events","success":true,"trace_id":"2eab2547aaf5da7b14ed1721dcc288c5","span_id":"300e970a8bf907d3","trace_flags":"01"}
{"timestamp":"2025-09-10 10:08:52.568","level":"INFO","service":"api-gateway","message":"Auth: login_initiation","version":"0.0.1","environment":"development","action":"login_initiation","redirectUri":"http://localhost:3000/auth/callback","traceId":"caed43dc390ca3072c11adbf5bf4789d","category":"authentication","trace_id":"caed43dc390ca3072c11adbf5bf4789d","span_id":"955acdbfd66aa4f6","trace_flags":"01"}
{"timestamp":"2025-09-10 10:08:53.212","level":"INFO","service":"api-gateway","message":"Auth: callback_processing","version":"0.0.1","environment":"development","action":"callback_processing","redirectUri":"http://localhost:3000/auth/callback","code":"present","traceId":"32f8e05b468b69017e1b1414c7db8bfe","category":"authentication","trace_id":"32f8e05b468b69017e1b1414c7db8bfe","span_id":"bb0a65975f598f7c","trace_flags":"01"}
{"timestamp":"2025-09-10 10:08:53.431","level":"INFO","service":"api-gateway","message":"Kafka: publish to auth_events success","version":"0.0.1","environment":"development","userId":"b1121316386326fcbdf65b22d2fedc636dace449c8e16daa6d9ac680d9223142","authMethod":"oauth2","traceId":"32f8e05b468b69017e1b1414c7db8bfe","category":"kafka","action":"publish","topic":"auth_events","success":true,"trace_id":"32f8e05b468b69017e1b1414c7db8bfe","span_id":"ec735a141a96bc35","trace_flags":"01"}
{"timestamp":"2025-09-10 10:09:03.620","level":"INFO","service":"api-gateway","message":"Auth: logout_success","version":"0.0.1","environment":"development","action":"logout_success","category":"authentication","trace_id":"791a5b729f402feaa5e40e873ab97c00","span_id":"9196792a63b766d4","trace_flags":"01"}
{"timestamp":"2025-09-10 11:04:49.740","level":"INFO","service":"api-gateway","message":"ðŸš€ API Gateway starting up","version":"0.0.1","environment":"development","action":"startup","port":3002,"corsOrigin":"http://localhost:3000","nodeEnv":"development"}
{"timestamp":"2025-09-10 11:04:49.747","level":"INFO","service":"api-gateway","message":"âœ… API Gateway successfully started","version":"0.0.1","environment":"development","action":"startup_complete","port":3002,"url":"http://localhost:3002","features":["authentication","tracing","metrics","kafka_events"]}
{"timestamp":"2025-09-10 11:53:37.176","level":"INFO","service":"api-gateway","message":"Auth: login_initiation","version":"0.0.1","environment":"development","action":"login_initiation","redirectUri":"http://localhost:3000/auth/callback","traceId":"491ac60140419afb6bb33ec5ef7f3d89","category":"authentication","trace_id":"491ac60140419afb6bb33ec5ef7f3d89","span_id":"94562cb4894d9c97","trace_flags":"01"}
{"timestamp":"2025-09-10 11:53:37.816","level":"INFO","service":"api-gateway","message":"Auth: callback_processing","version":"0.0.1","environment":"development","action":"callback_processing","redirectUri":"http://localhost:3000/auth/callback","code":"present","traceId":"a4e42bba2f7db112d6d374ba9d02cec9","category":"authentication","trace_id":"a4e42bba2f7db112d6d374ba9d02cec9","span_id":"f476eee55f7b6f8f","trace_flags":"01"}
{"timestamp":"2025-09-10 11:53:38.610","level":"INFO","service":"api-gateway","message":"Kafka: publish to user-events success","version":"0.0.1","environment":"development","userId":"b1121316386326fcbdf65b22d2fedc636dace449c8e16daa6d9ac680d9223142","authMethod":"oauth2","traceId":"a4e42bba2f7db112d6d374ba9d02cec9","category":"kafka","action":"publish","topic":"user-events","success":true,"trace_id":"a4e42bba2f7db112d6d374ba9d02cec9","span_id":"e2a06097d0a1e961","trace_flags":"01"}
{"timestamp":"2025-09-10 12:02:35.633","level":"INFO","service":"api-gateway","message":"ðŸš€ API Gateway starting up","version":"0.0.1","environment":"development","action":"startup","port":3002,"corsOrigin":"http://localhost:3000","nodeEnv":"development"}
{"timestamp":"2025-09-10 12:02:35.640","level":"INFO","service":"api-gateway","message":"âœ… API Gateway successfully started","version":"0.0.1","environment":"development","action":"startup_complete","port":3002,"url":"http://localhost:3002","features":["authentication","tracing","metrics","kafka_events"]}
{"timestamp":"2025-09-10 12:03:26.681","level":"INFO","service":"api-gateway","message":"ðŸš€ API Gateway starting up","version":"0.0.1","environment":"development","action":"startup","port":3002,"corsOrigin":"http://localhost:3000","nodeEnv":"development"}
{"timestamp":"2025-09-10 12:03:26.687","level":"INFO","service":"api-gateway","message":"âœ… API Gateway successfully started","version":"0.0.1","environment":"development","action":"startup_complete","port":3002,"url":"http://localhost:3002","features":["authentication","tracing","metrics","kafka_events"]}
{"timestamp":"2025-09-10 12:03:53.880","level":"INFO","service":"api-gateway","message":"ðŸš€ API Gateway starting up","version":"0.0.1","environment":"development","action":"startup","port":3002,"corsOrigin":"http://localhost:3000","nodeEnv":"development"}
{"timestamp":"2025-09-10 12:03:53.886","level":"INFO","service":"api-gateway","message":"âœ… API Gateway successfully started","version":"0.0.1","environment":"development","action":"startup_complete","port":3002,"url":"http://localhost:3002","features":["authentication","tracing","metrics","kafka_events"]}
{"timestamp":"2025-09-10 12:13:29.922","level":"INFO","service":"api-gateway","message":"Auth: login_initiation","version":"0.0.1","environment":"development","action":"login_initiation","redirectUri":"http://localhost:3000/auth/callback","traceId":"4166176d055510d40d0a0a92cb2a1586","category":"authentication","trace_id":"4166176d055510d40d0a0a92cb2a1586","span_id":"402d696e95d54ab4","trace_flags":"01"}
{"timestamp":"2025-09-10 12:13:30.549","level":"INFO","service":"api-gateway","message":"Auth: callback_processing","version":"0.0.1","environment":"development","action":"callback_processing","redirectUri":"http://localhost:3000/auth/callback","code":"present","traceId":"cecaffd0425b9c2ccdd8d282456ea432","category":"authentication","trace_id":"cecaffd0425b9c2ccdd8d282456ea432","span_id":"a274f4df802347aa","trace_flags":"01"}
{"timestamp":"2025-09-10 12:13:31.328","level":"INFO","service":"api-gateway","message":"Kafka: publish to user-events success","version":"0.0.1","environment":"development","userId":"b1121316386326fcbdf65b22d2fedc636dace449c8e16daa6d9ac680d9223142","authMethod":"oauth2","traceId":"cecaffd0425b9c2ccdd8d282456ea432","category":"kafka","action":"publish","topic":"user-events","success":true,"trace_id":"cecaffd0425b9c2ccdd8d282456ea432","span_id":"82dfbfe2501852f7","trace_flags":"01"}
{"timestamp":"2025-09-10 12:13:34.018","level":"INFO","service":"api-gateway","message":"Auth: logout_event_published","version":"0.0.1","environment":"development","action":"logout_event_published","userId":"b1121316386326fcbdf65b22d2fedc636dace449c8e16daa6d9ac680d9223142","eventType":"user.logged_out","category":"authentication","trace_id":"147af35e4f30b3cb198abe85d4b9ed04","span_id":"d73f2395da3734d9","trace_flags":"01"}
{"timestamp":"2025-09-10 12:13:34.019","level":"INFO","service":"api-gateway","message":"Auth: end_session_url_built","version":"0.0.1","environment":"development","action":"end_session_url_built","hasIdToken":true,"postLogoutRedirectUri":"http://localhost:3001/","category":"authentication","trace_id":"147af35e4f30b3cb198abe85d4b9ed04","span_id":"cdce8d61d1fb70ca","trace_flags":"01"}
{"timestamp":"2025-09-10 12:13:34.019","level":"INFO","service":"api-gateway","message":"Auth: logout_success","version":"0.0.1","environment":"development","action":"logout_success","hasEndSessionUrl":true,"userId":"b1121316386326fcbdf65b22d2fedc636dace449c8e16daa6d9ac680d9223142","category":"authentication","trace_id":"147af35e4f30b3cb198abe85d4b9ed04","span_id":"cdce8d61d1fb70ca","trace_flags":"01"}
{"timestamp":"2025-09-10 12:13:56.305","level":"INFO","service":"api-gateway","message":"Auth: login_initiation","version":"0.0.1","environment":"development","action":"login_initiation","redirectUri":"http://localhost:3000/auth/callback","traceId":"77da75bd5dfc9f2c65d5fc9f427620f4","category":"authentication","trace_id":"77da75bd5dfc9f2c65d5fc9f427620f4","span_id":"985387c9b588c6a5","trace_flags":"01"}
{"timestamp":"2025-09-10 12:16:11.437","level":"INFO","service":"api-gateway","message":"ðŸš€ API Gateway starting up","version":"0.0.1","environment":"development","action":"startup","port":3002,"corsOrigin":"http://localhost:3000","nodeEnv":"development"}
{"timestamp":"2025-09-10 12:16:11.442","level":"INFO","service":"api-gateway","message":"âœ… API Gateway successfully started","version":"0.0.1","environment":"development","action":"startup_complete","port":3002,"url":"http://localhost:3002","features":["authentication","tracing","metrics","kafka_events"]}
{"timestamp":"2025-09-10 12:17:24.332","level":"INFO","service":"api-gateway","message":"ðŸš€ API Gateway starting up","version":"0.0.1","environment":"development","action":"startup","port":3002,"corsOrigin":"http://localhost:3000","nodeEnv":"development"}
{"timestamp":"2025-09-10 12:17:24.339","level":"INFO","service":"api-gateway","message":"âœ… API Gateway successfully started","version":"0.0.1","environment":"development","action":"startup_complete","port":3002,"url":"http://localhost:3002","features":["authentication","tracing","metrics","kafka_events"]}
{"timestamp":"2025-09-10 12:17:53.574","level":"INFO","service":"api-gateway","message":"Auth: login_initiation","version":"0.0.1","environment":"development","action":"login_initiation","redirectUri":"http://localhost:3000/auth/callback","traceId":"757741cb42a69c970bfcca78aa5d2fc6","category":"authentication","trace_id":"757741cb42a69c970bfcca78aa5d2fc6","span_id":"307d6876697cf224","trace_flags":"01"}
{"timestamp":"2025-09-10 12:18:01.342","level":"INFO","service":"api-gateway","message":"Auth: callback_processing","version":"0.0.1","environment":"development","action":"callback_processing","redirectUri":"http://localhost:3000/auth/callback","code":"present","traceId":"a91af6f225f512dd1f31cb27c54c2dff","category":"authentication","trace_id":"a91af6f225f512dd1f31cb27c54c2dff","span_id":"7fd4cd457c207ae2","trace_flags":"01"}
{"timestamp":"2025-09-10 12:18:01.983","level":"INFO","service":"api-gateway","message":"Kafka: publish to user-events success","version":"0.0.1","environment":"development","userId":"b1121316386326fcbdf65b22d2fedc636dace449c8e16daa6d9ac680d9223142","authMethod":"oauth2","traceId":"a91af6f225f512dd1f31cb27c54c2dff","category":"kafka","action":"publish","topic":"user-events","success":true,"trace_id":"a91af6f225f512dd1f31cb27c54c2dff","span_id":"df0c594bcd7bd2fb","trace_flags":"01"}
{"timestamp":"2025-09-10 12:18:13.330","level":"INFO","service":"api-gateway","message":"Auth: logout_event_published","version":"0.0.1","environment":"development","action":"logout_event_published","userId":"b1121316386326fcbdf65b22d2fedc636dace449c8e16daa6d9ac680d9223142","eventType":"user.logged_out","category":"authentication","trace_id":"481bd4facede6a4f80aa860cf7e4e373","span_id":"15bb316d34284951","trace_flags":"01"}
{"timestamp":"2025-09-10 12:18:13.331","level":"INFO","service":"api-gateway","message":"Auth: end_session_url_built","version":"0.0.1","environment":"development","action":"end_session_url_built","hasIdToken":true,"postLogoutRedirectUri":"http://localhost:3000/","category":"authentication","trace_id":"481bd4facede6a4f80aa860cf7e4e373","span_id":"f08b7282b0eba988","trace_flags":"01"}
{"timestamp":"2025-09-10 12:18:13.331","level":"INFO","service":"api-gateway","message":"Auth: logout_success","version":"0.0.1","environment":"development","action":"logout_success","hasEndSessionUrl":true,"userId":"b1121316386326fcbdf65b22d2fedc636dace449c8e16daa6d9ac680d9223142","category":"authentication","trace_id":"481bd4facede6a4f80aa860cf7e4e373","span_id":"f08b7282b0eba988","trace_flags":"01"}
{"timestamp":"2025-09-10 12:18:28.886","level":"INFO","service":"api-gateway","message":"Auth: login_initiation","version":"0.0.1","environment":"development","action":"login_initiation","redirectUri":"http://localhost:3000/auth/callback","traceId":"b2f17188d986bf8868656e067a3fd197","category":"authentication","trace_id":"b2f17188d986bf8868656e067a3fd197","span_id":"1fefa1a05580aca5","trace_flags":"01"}
{"timestamp":"2025-09-10 12:18:29.300","level":"INFO","service":"api-gateway","message":"Auth: callback_processing","version":"0.0.1","environment":"development","action":"callback_processing","redirectUri":"http://localhost:3000/auth/callback","code":"present","traceId":"b6e557850dbdcf0b78ee9d87e087bd2b","category":"authentication","trace_id":"b6e557850dbdcf0b78ee9d87e087bd2b","span_id":"97481587cd1dca79","trace_flags":"01"}
{"timestamp":"2025-09-10 12:18:29.497","level":"INFO","service":"api-gateway","message":"Kafka: publish to user-events success","version":"0.0.1","environment":"development","userId":"b1121316386326fcbdf65b22d2fedc636dace449c8e16daa6d9ac680d9223142","authMethod":"oauth2","traceId":"b6e557850dbdcf0b78ee9d87e087bd2b","category":"kafka","action":"publish","topic":"user-events","success":true,"trace_id":"b6e557850dbdcf0b78ee9d87e087bd2b","span_id":"334d7e89ed3f30a7","trace_flags":"01"}
{"timestamp":"2025-09-10 12:18:36.290","level":"INFO","service":"api-gateway","message":"Auth: logout_event_published","version":"0.0.1","environment":"development","action":"logout_event_published","userId":"b1121316386326fcbdf65b22d2fedc636dace449c8e16daa6d9ac680d9223142","eventType":"user.logged_out","category":"authentication","trace_id":"a1aa7f8d35677f54ea8a1afc93756499","span_id":"6f6dfd0196763d4e","trace_flags":"01"}
{"timestamp":"2025-09-10 12:18:36.290","level":"INFO","service":"api-gateway","message":"Auth: end_session_url_built","version":"0.0.1","environment":"development","action":"end_session_url_built","hasIdToken":true,"postLogoutRedirectUri":"http://localhost:3000/","category":"authentication","trace_id":"a1aa7f8d35677f54ea8a1afc93756499","span_id":"64315976dd87efcb","trace_flags":"01"}
{"timestamp":"2025-09-10 12:18:36.290","level":"INFO","service":"api-gateway","message":"Auth: logout_success","version":"0.0.1","environment":"development","action":"logout_success","hasEndSessionUrl":true,"userId":"b1121316386326fcbdf65b22d2fedc636dace449c8e16daa6d9ac680d9223142","category":"authentication","trace_id":"a1aa7f8d35677f54ea8a1afc93756499","span_id":"64315976dd87efcb","trace_flags":"01"}
{"timestamp":"2025-09-10 12:19:29.788","level":"INFO","service":"api-gateway","message":"Auth: login_initiation","version":"0.0.1","environment":"development","action":"login_initiation","redirectUri":"http://localhost:3000/auth/callback","traceId":"42df86f674ee6b707438b6845c455cb9","category":"authentication","trace_id":"42df86f674ee6b707438b6845c455cb9","span_id":"59a2f384ad27121c","trace_flags":"01"}
{"timestamp":"2025-09-10 12:19:36.885","level":"INFO","service":"api-gateway","message":"Auth: callback_processing","version":"0.0.1","environment":"development","action":"callback_processing","redirectUri":"http://localhost:3000/auth/callback","code":"present","traceId":"44ae5078f2337a032fe1e9323f089bc5","category":"authentication","trace_id":"44ae5078f2337a032fe1e9323f089bc5","span_id":"1c46df4ae5cce82b","trace_flags":"01"}
{"timestamp":"2025-09-10 12:19:37.072","level":"INFO","service":"api-gateway","message":"Kafka: publish to user-events success","version":"0.0.1","environment":"development","userId":"b1121316386326fcbdf65b22d2fedc636dace449c8e16daa6d9ac680d9223142","authMethod":"oauth2","traceId":"44ae5078f2337a032fe1e9323f089bc5","category":"kafka","action":"publish","topic":"user-events","success":true,"trace_id":"44ae5078f2337a032fe1e9323f089bc5","span_id":"552cdded948893fa","trace_flags":"01"}
{"timestamp":"2025-09-10 12:19:39.416","level":"INFO","service":"api-gateway","message":"Auth: logout_event_published","version":"0.0.1","environment":"development","action":"logout_event_published","userId":"b1121316386326fcbdf65b22d2fedc636dace449c8e16daa6d9ac680d9223142","eventType":"user.logged_out","category":"authentication","trace_id":"d7b0ad4bc4732960f36183c1c9303ffc","span_id":"1d444aea30919feb","trace_flags":"01"}
{"timestamp":"2025-09-10 12:19:39.416","level":"INFO","service":"api-gateway","message":"Auth: end_session_url_built","version":"0.0.1","environment":"development","action":"end_session_url_built","hasIdToken":true,"postLogoutRedirectUri":"http://localhost:3000/","category":"authentication","trace_id":"d7b0ad4bc4732960f36183c1c9303ffc","span_id":"67f3ae3ef2adef0c","trace_flags":"01"}
{"timestamp":"2025-09-10 12:19:39.416","level":"INFO","service":"api-gateway","message":"Auth: logout_success","version":"0.0.1","environment":"development","action":"logout_success","hasEndSessionUrl":true,"userId":"b1121316386326fcbdf65b22d2fedc636dace449c8e16daa6d9ac680d9223142","category":"authentication","trace_id":"d7b0ad4bc4732960f36183c1c9303ffc","span_id":"67f3ae3ef2adef0c","trace_flags":"01"}
{"timestamp":"2025-09-11 11:33:54.378","level":"INFO","service":"api-gateway","message":"Auth: login_initiation","version":"0.0.1","environment":"development","action":"login_initiation","redirectUri":"http://localhost:3000/auth/callback","traceId":"0c65892985083b2cfa7d74e6968049d3","category":"authentication","trace_id":"0c65892985083b2cfa7d74e6968049d3","span_id":"6daa5f52c5ad00a7","trace_flags":"01"}
{"timestamp":"2025-09-11 11:59:31.945","level":"INFO","service":"api-gateway","message":"Auth: callback_processing","version":"0.0.1","environment":"development","action":"callback_processing","redirectUri":"http://localhost:3000/auth/callback","code":"present","traceId":"c6621f2d8f553d7612d920b76f284be5","category":"authentication","trace_id":"c6621f2d8f553d7612d920b76f284be5","span_id":"19a4358d0896c0aa","trace_flags":"01"}
{"timestamp":"2025-09-11 11:59:32.320","level":"INFO","service":"api-gateway","message":"Kafka: publish to user-events success","version":"0.0.1","environment":"development","userId":"b1121316386326fcbdf65b22d2fedc636dace449c8e16daa6d9ac680d9223142","authMethod":"oauth2","traceId":"c6621f2d8f553d7612d920b76f284be5","category":"kafka","action":"publish","topic":"user-events","success":true,"trace_id":"c6621f2d8f553d7612d920b76f284be5","span_id":"51ac38c4787d434b","trace_flags":"01"}
{"timestamp":"2025-09-11 11:59:36.091","level":"INFO","service":"api-gateway","message":"Auth: logout_event_published","version":"0.0.1","environment":"development","action":"logout_event_published","userId":"b1121316386326fcbdf65b22d2fedc636dace449c8e16daa6d9ac680d9223142","eventType":"user.logged_out","category":"authentication","trace_id":"d3594bababd38c26ad86abaaf96ec5fe","span_id":"dec9b51919a73904","trace_flags":"01"}
{"timestamp":"2025-09-11 11:59:36.091","level":"INFO","service":"api-gateway","message":"Auth: end_session_url_built","version":"0.0.1","environment":"development","action":"end_session_url_built","hasIdToken":true,"postLogoutRedirectUri":"http://localhost:3000/","category":"authentication","trace_id":"d3594bababd38c26ad86abaaf96ec5fe","span_id":"a1eed84072da3257","trace_flags":"01"}
{"timestamp":"2025-09-11 11:59:36.091","level":"INFO","service":"api-gateway","message":"Auth: logout_success","version":"0.0.1","environment":"development","action":"logout_success","hasEndSessionUrl":true,"userId":"b1121316386326fcbdf65b22d2fedc636dace449c8e16daa6d9ac680d9223142","category":"authentication","trace_id":"d3594bababd38c26ad86abaaf96ec5fe","span_id":"a1eed84072da3257","trace_flags":"01"}
{"timestamp":"2025-09-11 11:59:50.022","level":"INFO","service":"api-gateway","message":"Auth: login_initiation","version":"0.0.1","environment":"development","action":"login_initiation","redirectUri":"http://localhost:3000/auth/callback","traceId":"1a75b2bdc95025b5d2a4ae0335cbda5c","category":"authentication","trace_id":"1a75b2bdc95025b5d2a4ae0335cbda5c","span_id":"b088c9347190b9eb","trace_flags":"01"}
{"timestamp":"2025-09-11 11:59:50.409","level":"INFO","service":"api-gateway","message":"Auth: callback_processing","version":"0.0.1","environment":"development","action":"callback_processing","redirectUri":"http://localhost:3000/auth/callback","code":"present","traceId":"82077d57c489cbacf8626d7d0a019c6d","category":"authentication","trace_id":"82077d57c489cbacf8626d7d0a019c6d","span_id":"47de1c5abed3bb8a","trace_flags":"01"}
{"timestamp":"2025-09-11 11:59:50.623","level":"INFO","service":"api-gateway","message":"Kafka: publish to user-events success","version":"0.0.1","environment":"development","userId":"b1121316386326fcbdf65b22d2fedc636dace449c8e16daa6d9ac680d9223142","authMethod":"oauth2","traceId":"82077d57c489cbacf8626d7d0a019c6d","category":"kafka","action":"publish","topic":"user-events","success":true,"trace_id":"82077d57c489cbacf8626d7d0a019c6d","span_id":"d2fbac900ef760bf","trace_flags":"01"}
{"timestamp":"2025-09-11 11:59:52.985","level":"INFO","service":"api-gateway","message":"Auth: logout_event_published","version":"0.0.1","environment":"development","action":"logout_event_published","userId":"b1121316386326fcbdf65b22d2fedc636dace449c8e16daa6d9ac680d9223142","eventType":"user.logged_out","category":"authentication","trace_id":"324c65ed7d37b32c1d2fe4a4fe8d1b3d","span_id":"6bb38e52ee74d85f","trace_flags":"01"}
{"timestamp":"2025-09-11 11:59:52.986","level":"INFO","service":"api-gateway","message":"Auth: end_session_url_built","version":"0.0.1","environment":"development","action":"end_session_url_built","hasIdToken":true,"postLogoutRedirectUri":"http://localhost:3000/","category":"authentication","trace_id":"324c65ed7d37b32c1d2fe4a4fe8d1b3d","span_id":"0893db0d2bb46094","trace_flags":"01"}
{"timestamp":"2025-09-11 11:59:52.986","level":"INFO","service":"api-gateway","message":"Auth: logout_success","version":"0.0.1","environment":"development","action":"logout_success","hasEndSessionUrl":true,"userId":"b1121316386326fcbdf65b22d2fedc636dace449c8e16daa6d9ac680d9223142","category":"authentication","trace_id":"324c65ed7d37b32c1d2fe4a4fe8d1b3d","span_id":"0893db0d2bb46094","trace_flags":"01"}
{"timestamp":"2025-09-11 12:00:18.524","level":"INFO","service":"api-gateway","message":"Auth: login_initiation","version":"0.0.1","environment":"development","action":"login_initiation","redirectUri":"http://localhost:3000/auth/callback","traceId":"65cb0f0b00e32c0b68475a1aa4d41998","category":"authentication","trace_id":"65cb0f0b00e32c0b68475a1aa4d41998","span_id":"6923cdfae676b051","trace_flags":"01"}
{"timestamp":"2025-09-11 12:00:25.946","level":"INFO","service":"api-gateway","message":"Auth: callback_processing","version":"0.0.1","environment":"development","action":"callback_processing","redirectUri":"http://localhost:3000/auth/callback","code":"present","traceId":"d92c7b996b6ad5517ea659999bdf771c","category":"authentication","trace_id":"d92c7b996b6ad5517ea659999bdf771c","span_id":"a58fc430c63755f0","trace_flags":"01"}
{"timestamp":"2025-09-11 12:00:26.127","level":"INFO","service":"api-gateway","message":"Kafka: publish to user-events success","version":"0.0.1","environment":"development","userId":"b1121316386326fcbdf65b22d2fedc636dace449c8e16daa6d9ac680d9223142","authMethod":"oauth2","traceId":"d92c7b996b6ad5517ea659999bdf771c","category":"kafka","action":"publish","topic":"user-events","success":true,"trace_id":"d92c7b996b6ad5517ea659999bdf771c","span_id":"7b3528a70212c47a","trace_flags":"01"}
{"timestamp":"2025-09-11 12:00:29.453","level":"INFO","service":"api-gateway","message":"Auth: logout_event_published","version":"0.0.1","environment":"development","action":"logout_event_published","userId":"b1121316386326fcbdf65b22d2fedc636dace449c8e16daa6d9ac680d9223142","eventType":"user.logged_out","category":"authentication","trace_id":"5f221787d559f1d2ac82284d645a403b","span_id":"f75fa5fbd341b588","trace_flags":"01"}
{"timestamp":"2025-09-11 12:00:29.454","level":"INFO","service":"api-gateway","message":"Auth: end_session_url_built","version":"0.0.1","environment":"development","action":"end_session_url_built","hasIdToken":true,"postLogoutRedirectUri":"http://localhost:3000/","category":"authentication","trace_id":"5f221787d559f1d2ac82284d645a403b","span_id":"6ee04c6b1ed8ab61","trace_flags":"01"}
{"timestamp":"2025-09-11 12:00:29.454","level":"INFO","service":"api-gateway","message":"Auth: logout_success","version":"0.0.1","environment":"development","action":"logout_success","hasEndSessionUrl":true,"userId":"b1121316386326fcbdf65b22d2fedc636dace449c8e16daa6d9ac680d9223142","category":"authentication","trace_id":"5f221787d559f1d2ac82284d645a403b","span_id":"6ee04c6b1ed8ab61","trace_flags":"01"}
{"timestamp":"2025-09-11 12:10:08.413","level":"INFO","service":"api-gateway","message":"ðŸš€ API Gateway starting up","version":"0.0.1","environment":"development","action":"startup","port":3002,"corsOrigin":"http://localhost:3000","nodeEnv":"development"}
{"timestamp":"2025-09-11 12:10:08.419","level":"INFO","service":"api-gateway","message":"âœ… API Gateway successfully started","version":"0.0.1","environment":"development","action":"startup_complete","port":3002,"url":"http://localhost:3002","features":["authentication","tracing","metrics","kafka_events"]}
{"timestamp":"2025-09-11 12:13:22.542","level":"INFO","service":"api-gateway","message":"ðŸš€ API Gateway starting up","version":"0.0.1","environment":"development","action":"startup","port":3002,"corsOrigin":"http://localhost:3000","nodeEnv":"development"}
{"timestamp":"2025-09-11 12:13:22.548","level":"INFO","service":"api-gateway","message":"âœ… API Gateway successfully started","version":"0.0.1","environment":"development","action":"startup_complete","port":3002,"url":"http://localhost:3002","features":["authentication","tracing","metrics","kafka_events"]}
{"timestamp":"2025-09-14 09:26:14.280","level":"INFO","service":"api-gateway","message":"ðŸš€ API Gateway starting up","version":"0.0.1","environment":"development","action":"startup","port":3002,"corsOrigin":"http://localhost:3000","nodeEnv":"development"}
{"timestamp":"2025-09-14 09:26:14.286","level":"INFO","service":"api-gateway","message":"âœ… API Gateway successfully started","version":"0.0.1","environment":"development","action":"startup_complete","port":3002,"url":"http://localhost:3002","features":["authentication","tracing","metrics","kafka_events"]}
{"timestamp":"2025-09-14 09:26:39.261","level":"INFO","service":"api-gateway","message":"Auth: login_initiation","version":"0.0.1","environment":"development","action":"login_initiation","redirectUri":"http://localhost:3000/auth/callback","traceId":"344851269e9dbcad7a36a3a13fca3fb6","category":"authentication","trace_id":"344851269e9dbcad7a36a3a13fca3fb6","span_id":"ee0c47334237d5e1","trace_flags":"01"}
{"timestamp":"2025-09-14 09:27:57.636","level":"INFO","service":"api-gateway","message":"Auth: callback_processing","version":"0.0.1","environment":"development","action":"callback_processing","redirectUri":"http://localhost:3000/auth/callback","code":"present","traceId":"36b8c9966589850855030a453dd2581a","category":"authentication","trace_id":"36b8c9966589850855030a453dd2581a","span_id":"8475c9962e6e492f","trace_flags":"01"}
{"timestamp":"2025-09-14 09:27:57.883","level":"ERROR","service":"api-gateway","message":"Callback handling failed","version":"0.0.1","environment":"development","action":"callback_failed","traceId":"36b8c9966589850855030a453dd2581a","error":{"name":"Error","message":"Invalid access token received from Authentik","stack":"Error: Invalid access token received from Authentik\n    at TokenService.exchangeCodeForTokens (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/token.service.ts:56:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async <anonymous> (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/auth.service.ts:144:18)\n    at async <anonymous> (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/tracing/trace.service.ts:46:16)\n    at async TraceService.withSpan (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/tracing/trace.service.ts:45:22)\n    at async <anonymous> (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/auth.service.ts:139:38)\n    at async <anonymous> (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/tracing/trace.service.ts:46:16)\n    at async TraceService.withSpan (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/tracing/trace.service.ts:45:22)\n    at async AuthService.handleCallback (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/auth.service.ts:114:12)\n    at async AuthController.handleCallback (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/auth.controller.ts:37:20)"},"trace_id":"36b8c9966589850855030a453dd2581a","span_id":"8475c9962e6e492f","trace_flags":"01"}
{"timestamp":"2025-09-14 09:28:01.125","level":"INFO","service":"api-gateway","message":"Auth: callback_processing","version":"0.0.1","environment":"development","action":"callback_processing","redirectUri":"http://localhost:3000/auth/callback","code":"present","traceId":"d1a714531cf8bb8989d39289ba77705e","category":"authentication","trace_id":"d1a714531cf8bb8989d39289ba77705e","span_id":"95f47e32b7005eba","trace_flags":"01"}
{"timestamp":"2025-09-14 09:28:01.168","level":"ERROR","service":"api-gateway","message":"Callback handling failed","version":"0.0.1","environment":"development","action":"callback_failed","traceId":"d1a714531cf8bb8989d39289ba77705e","error":{"name":"Error","message":"Token exchange failed: {\"error\":\"invalid_grant\",\"error_description\":\"The provided authorization grant or refresh token is invalid, expired, revoked, does not match the redirection URI used in the authorization request, or was issued to another client\",\"request_id\":\"7a247aa8dbef48108c2969e269a21596\"}","stack":"Error: Token exchange failed: {\"error\":\"invalid_grant\",\"error_description\":\"The provided authorization grant or refresh token is invalid, expired, revoked, does not match the redirection URI used in the authorization request, or was issued to another client\",\"request_id\":\"7a247aa8dbef48108c2969e269a21596\"}\n    at AuthentikService.exchangeCodeForTokens (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/authentik.service.ts:130:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async TokenService.exchangeCodeForTokens (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/token.service.ts:40:22)\n    at async <anonymous> (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/auth.service.ts:144:18)\n    at async <anonymous> (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/tracing/trace.service.ts:46:16)\n    at async TraceService.withSpan (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/tracing/trace.service.ts:45:22)\n    at async <anonymous> (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/auth.service.ts:139:38)\n    at async <anonymous> (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/tracing/trace.service.ts:46:16)\n    at async TraceService.withSpan (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/tracing/trace.service.ts:45:22)\n    at async AuthService.handleCallback (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/auth.service.ts:114:12)"},"trace_id":"d1a714531cf8bb8989d39289ba77705e","span_id":"95f47e32b7005eba","trace_flags":"01"}
{"timestamp":"2025-09-14 09:28:02.715","level":"INFO","service":"api-gateway","message":"Auth: callback_processing","version":"0.0.1","environment":"development","action":"callback_processing","redirectUri":"http://localhost:3000/auth/callback","code":"present","traceId":"d8df9d54b390df31cf1c77488ec61de4","category":"authentication","trace_id":"d8df9d54b390df31cf1c77488ec61de4","span_id":"bd70ae2e68469fac","trace_flags":"01"}
{"timestamp":"2025-09-14 09:28:02.742","level":"ERROR","service":"api-gateway","message":"Callback handling failed","version":"0.0.1","environment":"development","action":"callback_failed","traceId":"d8df9d54b390df31cf1c77488ec61de4","error":{"name":"Error","message":"Token exchange failed: {\"error\":\"invalid_grant\",\"error_description\":\"The provided authorization grant or refresh token is invalid, expired, revoked, does not match the redirection URI used in the authorization request, or was issued to another client\",\"request_id\":\"3b7f455593944e06a79069d4dbd405b3\"}","stack":"Error: Token exchange failed: {\"error\":\"invalid_grant\",\"error_description\":\"The provided authorization grant or refresh token is invalid, expired, revoked, does not match the redirection URI used in the authorization request, or was issued to another client\",\"request_id\":\"3b7f455593944e06a79069d4dbd405b3\"}\n    at AuthentikService.exchangeCodeForTokens (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/authentik.service.ts:130:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async TokenService.exchangeCodeForTokens (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/token.service.ts:40:22)\n    at async <anonymous> (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/auth.service.ts:144:18)\n    at async <anonymous> (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/tracing/trace.service.ts:46:16)\n    at async TraceService.withSpan (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/tracing/trace.service.ts:45:22)\n    at async <anonymous> (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/auth.service.ts:139:38)\n    at async <anonymous> (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/tracing/trace.service.ts:46:16)\n    at async TraceService.withSpan (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/tracing/trace.service.ts:45:22)\n    at async AuthService.handleCallback (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/auth.service.ts:114:12)"},"trace_id":"d8df9d54b390df31cf1c77488ec61de4","span_id":"bd70ae2e68469fac","trace_flags":"01"}
{"timestamp":"2025-09-14 09:28:04.153","level":"INFO","service":"api-gateway","message":"Auth: callback_processing","version":"0.0.1","environment":"development","action":"callback_processing","redirectUri":"http://localhost:3000/auth/callback","code":"present","traceId":"05a603da26bbda12258ff00d7b0670f0","category":"authentication","trace_id":"05a603da26bbda12258ff00d7b0670f0","span_id":"9b0a8b72bfdba29a","trace_flags":"01"}
{"timestamp":"2025-09-14 09:28:04.201","level":"ERROR","service":"api-gateway","message":"Callback handling failed","version":"0.0.1","environment":"development","action":"callback_failed","traceId":"05a603da26bbda12258ff00d7b0670f0","error":{"name":"Error","message":"Token exchange failed: {\"error\":\"invalid_grant\",\"error_description\":\"The provided authorization grant or refresh token is invalid, expired, revoked, does not match the redirection URI used in the authorization request, or was issued to another client\",\"request_id\":\"038f0826b55149638c5850f64cb0fab6\"}","stack":"Error: Token exchange failed: {\"error\":\"invalid_grant\",\"error_description\":\"The provided authorization grant or refresh token is invalid, expired, revoked, does not match the redirection URI used in the authorization request, or was issued to another client\",\"request_id\":\"038f0826b55149638c5850f64cb0fab6\"}\n    at AuthentikService.exchangeCodeForTokens (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/authentik.service.ts:130:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async TokenService.exchangeCodeForTokens (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/token.service.ts:40:22)\n    at async <anonymous> (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/auth.service.ts:144:18)\n    at async <anonymous> (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/tracing/trace.service.ts:46:16)\n    at async TraceService.withSpan (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/tracing/trace.service.ts:45:22)\n    at async <anonymous> (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/auth.service.ts:139:38)\n    at async <anonymous> (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/tracing/trace.service.ts:46:16)\n    at async TraceService.withSpan (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/tracing/trace.service.ts:45:22)\n    at async AuthService.handleCallback (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/auth.service.ts:114:12)"},"trace_id":"05a603da26bbda12258ff00d7b0670f0","span_id":"9b0a8b72bfdba29a","trace_flags":"01"}
{"timestamp":"2025-09-14 09:29:18.807","level":"INFO","service":"api-gateway","message":"Auth: login_initiation","version":"0.0.1","environment":"development","action":"login_initiation","redirectUri":"http://localhost:3000/auth/callback","traceId":"2cad8a883494a69fb21867548cc20c14","category":"authentication","trace_id":"2cad8a883494a69fb21867548cc20c14","span_id":"2b3bc559b0cf9993","trace_flags":"01"}
{"timestamp":"2025-09-14 09:29:19.636","level":"INFO","service":"api-gateway","message":"Auth: callback_processing","version":"0.0.1","environment":"development","action":"callback_processing","redirectUri":"http://localhost:3000/auth/callback","code":"present","traceId":"d6a4f568468e27610038fb20ea480759","category":"authentication","trace_id":"d6a4f568468e27610038fb20ea480759","span_id":"88b6c09b513a100a","trace_flags":"01"}
{"timestamp":"2025-09-14 09:29:19.917","level":"ERROR","service":"api-gateway","message":"Callback handling failed","version":"0.0.1","environment":"development","action":"callback_failed","traceId":"d6a4f568468e27610038fb20ea480759","error":{"name":"Error","message":"Invalid access token received from Authentik","stack":"Error: Invalid access token received from Authentik\n    at TokenService.exchangeCodeForTokens (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/token.service.ts:56:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async <anonymous> (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/auth.service.ts:144:18)\n    at async <anonymous> (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/tracing/trace.service.ts:46:16)\n    at async TraceService.withSpan (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/tracing/trace.service.ts:45:22)\n    at async <anonymous> (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/auth.service.ts:139:38)\n    at async <anonymous> (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/tracing/trace.service.ts:46:16)\n    at async TraceService.withSpan (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/tracing/trace.service.ts:45:22)\n    at async AuthService.handleCallback (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/auth.service.ts:114:12)\n    at async AuthController.handleCallback (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/auth.controller.ts:37:20)"},"trace_id":"d6a4f568468e27610038fb20ea480759","span_id":"88b6c09b513a100a","trace_flags":"01"}
{"timestamp":"2025-09-14 09:29:28.092","level":"INFO","service":"api-gateway","message":"Auth: login_initiation","version":"0.0.1","environment":"development","action":"login_initiation","redirectUri":"http://localhost:3000/auth/callback","traceId":"d89bdfa1cbf6dade706444c6423b0ff3","category":"authentication","trace_id":"d89bdfa1cbf6dade706444c6423b0ff3","span_id":"9ef3dbdf4d069d55","trace_flags":"01"}
{"timestamp":"2025-09-14 09:29:28.677","level":"INFO","service":"api-gateway","message":"Auth: callback_processing","version":"0.0.1","environment":"development","action":"callback_processing","redirectUri":"http://localhost:3000/auth/callback","code":"present","traceId":"896578eea28ddb02e490559eca57cd18","category":"authentication","trace_id":"896578eea28ddb02e490559eca57cd18","span_id":"cac08873db483765","trace_flags":"01"}
{"timestamp":"2025-09-14 09:29:28.889","level":"ERROR","service":"api-gateway","message":"Callback handling failed","version":"0.0.1","environment":"development","action":"callback_failed","traceId":"896578eea28ddb02e490559eca57cd18","error":{"name":"Error","message":"Invalid access token received from Authentik","stack":"Error: Invalid access token received from Authentik\n    at TokenService.exchangeCodeForTokens (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/token.service.ts:56:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async <anonymous> (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/auth.service.ts:144:18)\n    at async <anonymous> (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/tracing/trace.service.ts:46:16)\n    at async TraceService.withSpan (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/tracing/trace.service.ts:45:22)\n    at async <anonymous> (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/auth.service.ts:139:38)\n    at async <anonymous> (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/tracing/trace.service.ts:46:16)\n    at async TraceService.withSpan (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/tracing/trace.service.ts:45:22)\n    at async AuthService.handleCallback (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/auth.service.ts:114:12)\n    at async AuthController.handleCallback (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/auth.controller.ts:37:20)"},"trace_id":"896578eea28ddb02e490559eca57cd18","span_id":"cac08873db483765","trace_flags":"01"}
{"timestamp":"2025-09-14 09:41:16.336","level":"INFO","service":"api-gateway","message":"ðŸš€ API Gateway starting up","version":"0.0.1","environment":"development","action":"startup","port":3002,"corsOrigin":"http://localhost:3000","nodeEnv":"development"}
{"timestamp":"2025-09-14 09:41:16.341","level":"INFO","service":"api-gateway","message":"âœ… API Gateway successfully started","version":"0.0.1","environment":"development","action":"startup_complete","port":3002,"url":"http://localhost:3002","features":["authentication","tracing","metrics","kafka_events"]}
{"timestamp":"2025-09-14 09:42:43.464","level":"INFO","service":"api-gateway","message":"Auth: login_initiation","version":"0.0.1","environment":"development","action":"login_initiation","redirectUri":"http://localhost:3000/auth/callback","traceId":"f07d336d21c4d321ab904cf40a3cbf00","category":"authentication","trace_id":"f07d336d21c4d321ab904cf40a3cbf00","span_id":"4d10def53d2b4f5d","trace_flags":"01"}
{"timestamp":"2025-09-14 09:42:44.156","level":"INFO","service":"api-gateway","message":"Auth: callback_processing","version":"0.0.1","environment":"development","action":"callback_processing","redirectUri":"http://localhost:3000/auth/callback","code":"present","traceId":"33afc53a082176e5fac10182c574546f","category":"authentication","trace_id":"33afc53a082176e5fac10182c574546f","span_id":"300512a548848a9a","trace_flags":"01"}
{"timestamp":"2025-09-14 09:42:44.413","level":"ERROR","service":"api-gateway","message":"Callback handling failed","version":"0.0.1","environment":"development","action":"callback_failed","traceId":"33afc53a082176e5fac10182c574546f","error":{"name":"Error","message":"Invalid access token received from Authentik","stack":"Error: Invalid access token received from Authentik\n    at TokenService.exchangeCodeForTokens (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/token.service.ts:56:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async <anonymous> (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/auth.service.ts:144:18)\n    at async <anonymous> (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/tracing/trace.service.ts:46:16)\n    at async TraceService.withSpan (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/tracing/trace.service.ts:45:22)\n    at async <anonymous> (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/auth.service.ts:139:38)\n    at async <anonymous> (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/tracing/trace.service.ts:46:16)\n    at async TraceService.withSpan (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/tracing/trace.service.ts:45:22)\n    at async AuthService.handleCallback (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/auth.service.ts:114:12)\n    at async AuthController.handleCallback (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/auth.controller.ts:37:20)"},"trace_id":"33afc53a082176e5fac10182c574546f","span_id":"300512a548848a9a","trace_flags":"01"}
{"timestamp":"2025-09-14 09:46:40.275","level":"INFO","service":"api-gateway","message":"ðŸš€ API Gateway starting up","version":"0.0.1","environment":"development","action":"startup","port":3002,"corsOrigin":"http://localhost:3000","nodeEnv":"development"}
{"timestamp":"2025-09-14 09:46:40.281","level":"INFO","service":"api-gateway","message":"âœ… API Gateway successfully started","version":"0.0.1","environment":"development","action":"startup_complete","port":3002,"url":"http://localhost:3002","features":["authentication","tracing","metrics","kafka_events"]}
{"timestamp":"2025-09-14 09:46:49.929","level":"INFO","service":"api-gateway","message":"Auth: login_initiation","version":"0.0.1","environment":"development","action":"login_initiation","redirectUri":"http://localhost:3000/auth/callback","traceId":"b138d26b19744d60f0448cb09ba646e5","category":"authentication","trace_id":"b138d26b19744d60f0448cb09ba646e5","span_id":"a832de5e6acd0038","trace_flags":"01"}
{"timestamp":"2025-09-14 09:46:50.677","level":"INFO","service":"api-gateway","message":"Auth: callback_processing","version":"0.0.1","environment":"development","action":"callback_processing","redirectUri":"http://localhost:3000/auth/callback","code":"present","traceId":"708184cbebd6646ae3620cf0df88b9ae","category":"authentication","trace_id":"708184cbebd6646ae3620cf0df88b9ae","span_id":"7751a128a875f2c4","trace_flags":"01"}
{"timestamp":"2025-09-14 09:46:50.900","level":"ERROR","service":"api-gateway","message":"Callback handling failed","version":"0.0.1","environment":"development","action":"callback_failed","traceId":"708184cbebd6646ae3620cf0df88b9ae","error":{"name":"Error","message":"Invalid access token received from Authentik","stack":"Error: Invalid access token received from Authentik\n    at TokenService.exchangeCodeForTokens (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/token.service.ts:56:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async <anonymous> (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/auth.service.ts:144:18)\n    at async <anonymous> (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/tracing/trace.service.ts:46:16)\n    at async TraceService.withSpan (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/tracing/trace.service.ts:45:22)\n    at async <anonymous> (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/auth.service.ts:139:38)\n    at async <anonymous> (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/tracing/trace.service.ts:46:16)\n    at async TraceService.withSpan (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/tracing/trace.service.ts:45:22)\n    at async AuthService.handleCallback (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/auth.service.ts:114:12)\n    at async AuthController.handleCallback (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/auth.controller.ts:37:20)"},"trace_id":"708184cbebd6646ae3620cf0df88b9ae","span_id":"7751a128a875f2c4","trace_flags":"01"}
{"timestamp":"2025-09-14 09:48:05.580","level":"INFO","service":"api-gateway","message":"ðŸš€ API Gateway starting up","version":"0.0.1","environment":"development","action":"startup","port":3002,"corsOrigin":"http://localhost:3000","nodeEnv":"development"}
{"timestamp":"2025-09-14 09:48:05.586","level":"INFO","service":"api-gateway","message":"âœ… API Gateway successfully started","version":"0.0.1","environment":"development","action":"startup_complete","port":3002,"url":"http://localhost:3002","features":["authentication","tracing","metrics","kafka_events"]}
{"timestamp":"2025-09-14 09:48:36.319","level":"INFO","service":"api-gateway","message":"ðŸš€ API Gateway starting up","version":"0.0.1","environment":"development","action":"startup","port":3002,"corsOrigin":"http://localhost:3000","nodeEnv":"development"}
{"timestamp":"2025-09-14 09:48:36.325","level":"INFO","service":"api-gateway","message":"âœ… API Gateway successfully started","version":"0.0.1","environment":"development","action":"startup_complete","port":3002,"url":"http://localhost:3002","features":["authentication","tracing","metrics","kafka_events"]}
{"timestamp":"2025-09-14 09:48:45.816","level":"INFO","service":"api-gateway","message":"Auth: login_initiation","version":"0.0.1","environment":"development","action":"login_initiation","redirectUri":"http://localhost:3000/auth/callback","traceId":"0ec9b81d7d0bbbb085278ded941b72d8","category":"authentication","trace_id":"0ec9b81d7d0bbbb085278ded941b72d8","span_id":"af67be9917545d37","trace_flags":"01"}
{"timestamp":"2025-09-14 09:48:46.602","level":"INFO","service":"api-gateway","message":"Auth: callback_processing","version":"0.0.1","environment":"development","action":"callback_processing","redirectUri":"http://localhost:3000/auth/callback","code":"present","traceId":"729f22a43afcb2904e39360c411ddc6b","category":"authentication","trace_id":"729f22a43afcb2904e39360c411ddc6b","span_id":"38aceac3e054ba5d","trace_flags":"01"}
{"timestamp":"2025-09-14 09:48:47.352","level":"INFO","service":"api-gateway","message":"Kafka: publish to user-events success","version":"0.0.1","environment":"development","userId":"95d842286001c80b0dceb69fd9cace8bd21758da13a5852b3f70e30e0b90dd2a","authMethod":"oauth2","traceId":"729f22a43afcb2904e39360c411ddc6b","category":"kafka","action":"publish","topic":"user-events","success":true,"trace_id":"729f22a43afcb2904e39360c411ddc6b","span_id":"768c8db2aca2534f","trace_flags":"01"}
{"timestamp":"2025-09-14 09:50:16.682","level":"INFO","service":"api-gateway","message":"Auth: logout_event_published","version":"0.0.1","environment":"development","action":"logout_event_published","userId":"95d842286001c80b0dceb69fd9cace8bd21758da13a5852b3f70e30e0b90dd2a","eventType":"user.logged_out","category":"authentication","trace_id":"a99690dd0e5b251712355b6b2323747e","span_id":"7147ab72fdf007c7","trace_flags":"01"}
{"timestamp":"2025-09-14 09:50:16.684","level":"INFO","service":"api-gateway","message":"Auth: end_session_url_built","version":"0.0.1","environment":"development","action":"end_session_url_built","hasIdToken":true,"postLogoutRedirectUri":"http://localhost:3000/","category":"authentication","trace_id":"a99690dd0e5b251712355b6b2323747e","span_id":"da076ebc5ddcb83a","trace_flags":"01"}
{"timestamp":"2025-09-14 09:50:16.685","level":"INFO","service":"api-gateway","message":"Auth: logout_success","version":"0.0.1","environment":"development","action":"logout_success","hasEndSessionUrl":true,"userId":"95d842286001c80b0dceb69fd9cace8bd21758da13a5852b3f70e30e0b90dd2a","category":"authentication","trace_id":"a99690dd0e5b251712355b6b2323747e","span_id":"da076ebc5ddcb83a","trace_flags":"01"}
{"timestamp":"2025-09-14 09:50:40.765","level":"INFO","service":"api-gateway","message":"Auth: login_initiation","version":"0.0.1","environment":"development","action":"login_initiation","redirectUri":"http://localhost:3000/auth/callback","traceId":"0c44257486e9ca39d583c0be9f06c198","category":"authentication","trace_id":"0c44257486e9ca39d583c0be9f06c198","span_id":"96cd30ae8514e48d","trace_flags":"01"}
{"timestamp":"2025-09-14 09:51:04.893","level":"INFO","service":"api-gateway","message":"Auth: login_initiation","version":"0.0.1","environment":"development","action":"login_initiation","redirectUri":"http://localhost:3000/auth/callback","traceId":"a630f349a42bd66cb147a5662dbef471","category":"authentication","trace_id":"a630f349a42bd66cb147a5662dbef471","span_id":"f6b507345508f247","trace_flags":"01"}
{"timestamp":"2025-09-14 09:51:16.673","level":"INFO","service":"api-gateway","message":"Auth: callback_processing","version":"0.0.1","environment":"development","action":"callback_processing","redirectUri":"http://localhost:3000/auth/callback","code":"present","traceId":"e71537cda4ab2482909dc5a65a21dadc","category":"authentication","trace_id":"e71537cda4ab2482909dc5a65a21dadc","span_id":"59327dca154fcbf4","trace_flags":"01"}
{"timestamp":"2025-09-14 09:51:16.876","level":"INFO","service":"api-gateway","message":"Kafka: publish to user-events success","version":"0.0.1","environment":"development","userId":"95d842286001c80b0dceb69fd9cace8bd21758da13a5852b3f70e30e0b90dd2a","authMethod":"oauth2","traceId":"e71537cda4ab2482909dc5a65a21dadc","category":"kafka","action":"publish","topic":"user-events","success":true,"trace_id":"e71537cda4ab2482909dc5a65a21dadc","span_id":"51ca9e0b2c027793","trace_flags":"01"}
{"timestamp":"2025-09-14 09:53:05.300","level":"INFO","service":"api-gateway","message":"Auth: logout_event_published","version":"0.0.1","environment":"development","action":"logout_event_published","userId":"95d842286001c80b0dceb69fd9cace8bd21758da13a5852b3f70e30e0b90dd2a","eventType":"user.logged_out","category":"authentication","trace_id":"b9591483b13f580774e6c0f9417bfb09","span_id":"a0f6f43cb5cc2af8","trace_flags":"01"}
{"timestamp":"2025-09-14 09:53:05.300","level":"INFO","service":"api-gateway","message":"Auth: end_session_url_built","version":"0.0.1","environment":"development","action":"end_session_url_built","hasIdToken":true,"postLogoutRedirectUri":"http://localhost:3000/","category":"authentication","trace_id":"b9591483b13f580774e6c0f9417bfb09","span_id":"6da2e78d899daa80","trace_flags":"01"}
{"timestamp":"2025-09-14 09:53:05.300","level":"INFO","service":"api-gateway","message":"Auth: logout_success","version":"0.0.1","environment":"development","action":"logout_success","hasEndSessionUrl":true,"userId":"95d842286001c80b0dceb69fd9cace8bd21758da13a5852b3f70e30e0b90dd2a","category":"authentication","trace_id":"b9591483b13f580774e6c0f9417bfb09","span_id":"6da2e78d899daa80","trace_flags":"01"}
{"timestamp":"2025-09-14 09:53:24.127","level":"INFO","service":"api-gateway","message":"Auth: login_initiation","version":"0.0.1","environment":"development","action":"login_initiation","redirectUri":"http://localhost:3000/auth/callback","traceId":"deaffd95f83b60b41c26407520bce589","category":"authentication","trace_id":"deaffd95f83b60b41c26407520bce589","span_id":"24fa9eb91ca11723","trace_flags":"01"}
{"timestamp":"2025-09-14 09:53:24.659","level":"INFO","service":"api-gateway","message":"Auth: callback_processing","version":"0.0.1","environment":"development","action":"callback_processing","redirectUri":"http://localhost:3000/auth/callback","code":"present","traceId":"6118e66da11e9904326641e440340da6","category":"authentication","trace_id":"6118e66da11e9904326641e440340da6","span_id":"43641cf277f105b2","trace_flags":"01"}
{"timestamp":"2025-09-14 09:53:24.864","level":"INFO","service":"api-gateway","message":"Kafka: publish to user-events success","version":"0.0.1","environment":"development","userId":"95d842286001c80b0dceb69fd9cace8bd21758da13a5852b3f70e30e0b90dd2a","authMethod":"oauth2","traceId":"6118e66da11e9904326641e440340da6","category":"kafka","action":"publish","topic":"user-events","success":true,"trace_id":"6118e66da11e9904326641e440340da6","span_id":"967927d1dd1180b3","trace_flags":"01"}
{"timestamp":"2025-09-14 09:53:30.879","level":"INFO","service":"api-gateway","message":"Auth: logout_event_published","version":"0.0.1","environment":"development","action":"logout_event_published","userId":"95d842286001c80b0dceb69fd9cace8bd21758da13a5852b3f70e30e0b90dd2a","eventType":"user.logged_out","category":"authentication","trace_id":"fef0638d693e083ddf2a5091b56a7406","span_id":"1a8bd4f7a41bc934","trace_flags":"01"}
{"timestamp":"2025-09-14 09:53:30.879","level":"INFO","service":"api-gateway","message":"Auth: end_session_url_built","version":"0.0.1","environment":"development","action":"end_session_url_built","hasIdToken":true,"postLogoutRedirectUri":"http://localhost:3000/","category":"authentication","trace_id":"fef0638d693e083ddf2a5091b56a7406","span_id":"07410a13af81014a","trace_flags":"01"}
{"timestamp":"2025-09-14 09:53:30.879","level":"INFO","service":"api-gateway","message":"Auth: logout_success","version":"0.0.1","environment":"development","action":"logout_success","hasEndSessionUrl":true,"userId":"95d842286001c80b0dceb69fd9cace8bd21758da13a5852b3f70e30e0b90dd2a","category":"authentication","trace_id":"fef0638d693e083ddf2a5091b56a7406","span_id":"07410a13af81014a","trace_flags":"01"}
{"timestamp":"2025-09-14 09:53:36.509","level":"INFO","service":"api-gateway","message":"Auth: login_initiation","version":"0.0.1","environment":"development","action":"login_initiation","redirectUri":"http://localhost:3000/auth/callback","traceId":"5c00d97c267068e8b933538655888995","category":"authentication","trace_id":"5c00d97c267068e8b933538655888995","span_id":"1e5b61c1c9fcf451","trace_flags":"01"}
{"timestamp":"2025-09-14 09:55:09.902","level":"INFO","service":"api-gateway","message":"Auth: callback_processing","version":"0.0.1","environment":"development","action":"callback_processing","redirectUri":"http://localhost:3000/auth/callback","code":"present","traceId":"73b4fedb39e9fe5012d8fab12dc95a0d","category":"authentication","trace_id":"73b4fedb39e9fe5012d8fab12dc95a0d","span_id":"89f590ef8f1c3959","trace_flags":"01"}
{"timestamp":"2025-09-14 09:55:10.113","level":"INFO","service":"api-gateway","message":"Kafka: publish to user-events success","version":"0.0.1","environment":"development","userId":"95d842286001c80b0dceb69fd9cace8bd21758da13a5852b3f70e30e0b90dd2a","authMethod":"oauth2","traceId":"73b4fedb39e9fe5012d8fab12dc95a0d","category":"kafka","action":"publish","topic":"user-events","success":true,"trace_id":"73b4fedb39e9fe5012d8fab12dc95a0d","span_id":"ca443c15ed8e4af1","trace_flags":"01"}
{"timestamp":"2025-09-14 09:55:12.478","level":"INFO","service":"api-gateway","message":"Auth: logout_event_published","version":"0.0.1","environment":"development","action":"logout_event_published","userId":"95d842286001c80b0dceb69fd9cace8bd21758da13a5852b3f70e30e0b90dd2a","eventType":"user.logged_out","category":"authentication","trace_id":"91a1fd7250a62f99e9dccc5137cb071d","span_id":"d2efe5d989784700","trace_flags":"01"}
{"timestamp":"2025-09-14 09:55:12.478","level":"INFO","service":"api-gateway","message":"Auth: end_session_url_built","version":"0.0.1","environment":"development","action":"end_session_url_built","hasIdToken":true,"postLogoutRedirectUri":"http://localhost:3000/","category":"authentication","trace_id":"91a1fd7250a62f99e9dccc5137cb071d","span_id":"d1dae0223015c2d5","trace_flags":"01"}
{"timestamp":"2025-09-14 09:55:12.478","level":"INFO","service":"api-gateway","message":"Auth: logout_success","version":"0.0.1","environment":"development","action":"logout_success","hasEndSessionUrl":true,"userId":"95d842286001c80b0dceb69fd9cace8bd21758da13a5852b3f70e30e0b90dd2a","category":"authentication","trace_id":"91a1fd7250a62f99e9dccc5137cb071d","span_id":"d1dae0223015c2d5","trace_flags":"01"}
{"timestamp":"2025-09-14 09:58:57.535","level":"INFO","service":"api-gateway","message":"ðŸš€ API Gateway starting up","version":"0.0.1","environment":"development","action":"startup","port":3002,"corsOrigin":"http://localhost:3000","nodeEnv":"development"}
{"timestamp":"2025-09-14 09:58:57.540","level":"INFO","service":"api-gateway","message":"âœ… API Gateway successfully started","version":"0.0.1","environment":"development","action":"startup_complete","port":3002,"url":"http://localhost:3002","features":["authentication","tracing","metrics","kafka_events"]}
{"timestamp":"2025-09-20 10:11:29.229","level":"INFO","service":"api-gateway","message":"ðŸš€ API Gateway starting up","version":"0.0.1","environment":"development","action":"startup","port":3002,"corsOrigin":"http://localhost:3000","nodeEnv":"development"}
{"timestamp":"2025-09-20 10:11:29.242","level":"INFO","service":"api-gateway","message":"âœ… API Gateway successfully started","version":"0.0.1","environment":"development","action":"startup_complete","port":3002,"url":"http://localhost:3002","features":["authentication","tracing","metrics","kafka_events"]}
{"timestamp":"2025-09-23 09:55:21.549","level":"INFO","service":"api-gateway","message":"ðŸš€ API Gateway starting up","version":"0.0.1","environment":"development","action":"startup","port":3002,"corsOrigin":"http://localhost:3000","nodeEnv":"development"}
{"timestamp":"2025-09-23 09:55:21.555","level":"INFO","service":"api-gateway","message":"âœ… API Gateway successfully started","version":"0.0.1","environment":"development","action":"startup_complete","port":3002,"url":"http://localhost:3002","features":["authentication","tracing","metrics","kafka_events"]}
{"timestamp":"2025-09-23 09:55:45.029","level":"INFO","service":"api-gateway","message":"Auth: login_initiation","version":"0.0.1","environment":"development","action":"login_initiation","redirectUri":"http://localhost:3000/auth/callback","traceId":"5efbfa7ee5114dad8d1f346d7ba00027","category":"authentication","trace_id":"5efbfa7ee5114dad8d1f346d7ba00027","span_id":"ada22f2f4497a135","trace_flags":"01"}
{"timestamp":"2025-09-23 09:56:33.755","level":"INFO","service":"api-gateway","message":"Auth: callback_processing","version":"0.0.1","environment":"development","action":"callback_processing","redirectUri":"http://localhost:3000/auth/callback","code":"present","traceId":"0704efc5ff2c72b97c9ddb09580e33b7","category":"authentication","trace_id":"0704efc5ff2c72b97c9ddb09580e33b7","span_id":"19e9897c12cfcbd1","trace_flags":"01"}
{"timestamp":"2025-09-23 09:56:34.442","level":"INFO","service":"api-gateway","message":"Kafka: publish to user-events success","version":"0.0.1","environment":"development","userId":"2f2948bba44a059193476f563de0837858479adedc74b728676b994228ad7a26","authMethod":"oauth2","traceId":"0704efc5ff2c72b97c9ddb09580e33b7","category":"kafka","action":"publish","topic":"user-events","success":true,"trace_id":"0704efc5ff2c72b97c9ddb09580e33b7","span_id":"56f6ca295144f58e","trace_flags":"01"}
{"timestamp":"2025-09-23 09:56:45.544","level":"INFO","service":"api-gateway","message":"Auth: logout_event_published","version":"0.0.1","environment":"development","action":"logout_event_published","userId":"2f2948bba44a059193476f563de0837858479adedc74b728676b994228ad7a26","eventType":"user.logged_out","category":"authentication","trace_id":"e143c57a3dde6830ac7dbce128a92972","span_id":"37b7a784be34f7d3","trace_flags":"01"}
{"timestamp":"2025-09-23 09:56:45.545","level":"INFO","service":"api-gateway","message":"Auth: end_session_url_built","version":"0.0.1","environment":"development","action":"end_session_url_built","hasIdToken":true,"postLogoutRedirectUri":"http://localhost:3000/","category":"authentication","trace_id":"e143c57a3dde6830ac7dbce128a92972","span_id":"f6a79a1c2651ba0f","trace_flags":"01"}
{"timestamp":"2025-09-23 09:56:45.545","level":"INFO","service":"api-gateway","message":"Auth: logout_success","version":"0.0.1","environment":"development","action":"logout_success","hasEndSessionUrl":true,"userId":"2f2948bba44a059193476f563de0837858479adedc74b728676b994228ad7a26","category":"authentication","trace_id":"e143c57a3dde6830ac7dbce128a92972","span_id":"f6a79a1c2651ba0f","trace_flags":"01"}
{"timestamp":"2025-09-23 09:57:52.228","level":"INFO","service":"api-gateway","message":"Auth: login_initiation","version":"0.0.1","environment":"development","action":"login_initiation","redirectUri":"http://localhost:3000/auth/callback","traceId":"78f6ea36798343dd43b523cc0158d476","category":"authentication","trace_id":"78f6ea36798343dd43b523cc0158d476","span_id":"7dfb5728ead700e7","trace_flags":"01"}
{"timestamp":"2025-09-23 09:58:59.820","level":"INFO","service":"api-gateway","message":"Auth: callback_processing","version":"0.0.1","environment":"development","action":"callback_processing","redirectUri":"http://localhost:3000/auth/callback","code":"present","traceId":"62c6eedd4175409ace05d5dbe94ca4cc","category":"authentication","trace_id":"62c6eedd4175409ace05d5dbe94ca4cc","span_id":"656506e026175db9","trace_flags":"01"}
{"timestamp":"2025-09-23 09:59:00.041","level":"INFO","service":"api-gateway","message":"Kafka: publish to user-events success","version":"0.0.1","environment":"development","userId":"2f2948bba44a059193476f563de0837858479adedc74b728676b994228ad7a26","authMethod":"oauth2","traceId":"62c6eedd4175409ace05d5dbe94ca4cc","category":"kafka","action":"publish","topic":"user-events","success":true,"trace_id":"62c6eedd4175409ace05d5dbe94ca4cc","span_id":"e407e142d4eea6cc","trace_flags":"01"}
{"timestamp":"2025-09-23 09:59:04.984","level":"INFO","service":"api-gateway","message":"Auth: logout_event_published","version":"0.0.1","environment":"development","action":"logout_event_published","userId":"2f2948bba44a059193476f563de0837858479adedc74b728676b994228ad7a26","eventType":"user.logged_out","category":"authentication","trace_id":"03a32c748f520a9b3f72f567d348ecc6","span_id":"409cc563548018f2","trace_flags":"01"}
{"timestamp":"2025-09-23 09:59:04.984","level":"INFO","service":"api-gateway","message":"Auth: end_session_url_built","version":"0.0.1","environment":"development","action":"end_session_url_built","hasIdToken":true,"postLogoutRedirectUri":"http://localhost:3000/","category":"authentication","trace_id":"03a32c748f520a9b3f72f567d348ecc6","span_id":"f56207718f8b45b4","trace_flags":"01"}
{"timestamp":"2025-09-23 09:59:04.985","level":"INFO","service":"api-gateway","message":"Auth: logout_success","version":"0.0.1","environment":"development","action":"logout_success","hasEndSessionUrl":true,"userId":"2f2948bba44a059193476f563de0837858479adedc74b728676b994228ad7a26","category":"authentication","trace_id":"03a32c748f520a9b3f72f567d348ecc6","span_id":"f56207718f8b45b4","trace_flags":"01"}
{"timestamp":"2025-09-23 09:59:09.352","level":"INFO","service":"api-gateway","message":"Auth: login_initiation","version":"0.0.1","environment":"development","action":"login_initiation","redirectUri":"http://localhost:3000/auth/callback","traceId":"56be4683d06e90dc95ad3626c721e705","category":"authentication","trace_id":"56be4683d06e90dc95ad3626c721e705","span_id":"ef96f3a6e3eae22c","trace_flags":"01"}
{"timestamp":"2025-09-23 10:06:52.196","level":"INFO","service":"api-gateway","message":"Auth: callback_processing","version":"0.0.1","environment":"development","action":"callback_processing","redirectUri":"http://localhost:3000/auth/callback","code":"present","traceId":"2accd55efe5245ecd730ca078e65494e","category":"authentication","trace_id":"2accd55efe5245ecd730ca078e65494e","span_id":"17e0eaeef7ea7bdc","trace_flags":"01"}
{"timestamp":"2025-09-23 10:06:52.578","level":"INFO","service":"api-gateway","message":"Kafka: publish to user-events success","version":"0.0.1","environment":"development","userId":"2f2948bba44a059193476f563de0837858479adedc74b728676b994228ad7a26","authMethod":"oauth2","traceId":"2accd55efe5245ecd730ca078e65494e","category":"kafka","action":"publish","topic":"user-events","success":true,"trace_id":"2accd55efe5245ecd730ca078e65494e","span_id":"d7546320c415b952","trace_flags":"01"}
{"timestamp":"2025-09-23 14:54:43.683","level":"INFO","service":"api-gateway","message":"Auth: login_initiation","version":"0.0.1","environment":"development","action":"login_initiation","redirectUri":"http://localhost:3000/auth/callback","traceId":"7e0cdc643d7af482f2130162e403ae56","category":"authentication","trace_id":"7e0cdc643d7af482f2130162e403ae56","span_id":"82b954efc457bfdc","trace_flags":"01"}
{"timestamp":"2025-09-23 14:54:44.443","level":"INFO","service":"api-gateway","message":"Auth: callback_processing","version":"0.0.1","environment":"development","action":"callback_processing","redirectUri":"http://localhost:3000/auth/callback","code":"present","traceId":"d1fd834d9b7e115fd83627257f097878","category":"authentication","trace_id":"d1fd834d9b7e115fd83627257f097878","span_id":"8ac2ffd68c96489a","trace_flags":"01"}
{"timestamp":"2025-09-23 14:54:44.820","level":"INFO","service":"api-gateway","message":"Kafka: publish to user-events success","version":"0.0.1","environment":"development","userId":"2f2948bba44a059193476f563de0837858479adedc74b728676b994228ad7a26","authMethod":"oauth2","traceId":"d1fd834d9b7e115fd83627257f097878","category":"kafka","action":"publish","topic":"user-events","success":true,"trace_id":"d1fd834d9b7e115fd83627257f097878","span_id":"9210b30b638954b7","trace_flags":"01"}
{"timestamp":"2025-09-23 14:54:48.019","level":"INFO","service":"api-gateway","message":"Auth: logout_event_published","version":"0.0.1","environment":"development","action":"logout_event_published","userId":"2f2948bba44a059193476f563de0837858479adedc74b728676b994228ad7a26","eventType":"user.logged_out","category":"authentication","trace_id":"1deee6ba63c572aaed17a326d6d95eb0","span_id":"3a5f1d576bbd850a","trace_flags":"01"}
{"timestamp":"2025-09-23 14:54:48.019","level":"INFO","service":"api-gateway","message":"Auth: end_session_url_built","version":"0.0.1","environment":"development","action":"end_session_url_built","hasIdToken":true,"postLogoutRedirectUri":"http://localhost:3000/","category":"authentication","trace_id":"1deee6ba63c572aaed17a326d6d95eb0","span_id":"6c484daa51e2a691","trace_flags":"01"}
{"timestamp":"2025-09-23 14:54:48.019","level":"INFO","service":"api-gateway","message":"Auth: logout_success","version":"0.0.1","environment":"development","action":"logout_success","hasEndSessionUrl":true,"userId":"2f2948bba44a059193476f563de0837858479adedc74b728676b994228ad7a26","category":"authentication","trace_id":"1deee6ba63c572aaed17a326d6d95eb0","span_id":"6c484daa51e2a691","trace_flags":"01"}
{"timestamp":"2025-09-24 09:23:03.138","level":"INFO","service":"api-gateway","message":"Auth: login_initiation","version":"0.0.1","environment":"development","action":"login_initiation","redirectUri":"http://localhost:3000/auth/callback","traceId":"f3a89f1ad165be0e6ac3ec909a704643","category":"authentication","trace_id":"f3a89f1ad165be0e6ac3ec909a704643","span_id":"e4c96d013a314d30","trace_flags":"01"}
{"timestamp":"2025-09-24 12:06:53.607","level":"INFO","service":"api-gateway","message":"ðŸš€ API Gateway starting up","version":"0.0.1","environment":"development","action":"startup","port":3002,"corsOrigin":"http://localhost:3000","nodeEnv":"development"}
{"timestamp":"2025-09-24 12:06:53.613","level":"INFO","service":"api-gateway","message":"âœ… API Gateway successfully started","version":"0.0.1","environment":"development","action":"startup_complete","port":3002,"url":"http://localhost:3002","features":["authentication","tracing","metrics","kafka_events"]}
{"timestamp":"2025-09-26 09:57:43.821","level":"INFO","service":"api-gateway","message":"ðŸš€ API Gateway starting up","version":"0.0.1","environment":"development","action":"startup","port":3002,"corsOrigin":"http://localhost:3000","nodeEnv":"development"}
{"timestamp":"2025-09-26 09:57:43.827","level":"INFO","service":"api-gateway","message":"âœ… API Gateway successfully started","version":"0.0.1","environment":"development","action":"startup_complete","port":3002,"url":"http://localhost:3002","features":["authentication","tracing","metrics","kafka_events"]}
{"timestamp":"2025-09-26 09:57:52.424","level":"INFO","service":"api-gateway","message":"Auth: login_initiation","version":"0.0.1","environment":"development","action":"login_initiation","redirectUri":"http://localhost:3000/auth/callback","traceId":"4753c4d854c42877ccd277be823da434","category":"authentication","trace_id":"4753c4d854c42877ccd277be823da434","span_id":"ed08f6d1f68cc4ef","trace_flags":"01"}
{"timestamp":"2025-09-26 10:24:11.945","level":"INFO","service":"api-gateway","message":"Auth: login_initiation","version":"0.0.1","environment":"development","action":"login_initiation","redirectUri":"http://localhost:3000/auth/callback","traceId":"a6146cdfd7be25ee47c23e6cd0e8e481","category":"authentication","trace_id":"a6146cdfd7be25ee47c23e6cd0e8e481","span_id":"02836e8a89ce8909","trace_flags":"01"}
{"timestamp":"2025-09-26 10:24:22.873","level":"INFO","service":"api-gateway","message":"Auth: callback_processing","version":"0.0.1","environment":"development","action":"callback_processing","redirectUri":"http://localhost:3000/auth/callback","code":"present","traceId":"4d8812403ba4eaf1c9417f7eeac76c30","category":"authentication","trace_id":"4d8812403ba4eaf1c9417f7eeac76c30","span_id":"99fd46358e19c519","trace_flags":"01"}
{"timestamp":"2025-09-26 10:24:23.449","level":"INFO","service":"api-gateway","message":"Kafka: publish to user-events success","version":"0.0.1","environment":"development","userId":"eda1fe9ba4a02358a850363832230b4784b348d1cdbc3771df41129603b9f95b","authMethod":"oauth2","traceId":"4d8812403ba4eaf1c9417f7eeac76c30","category":"kafka","action":"publish","topic":"user-events","success":true,"trace_id":"4d8812403ba4eaf1c9417f7eeac76c30","span_id":"7400a90788d601e8","trace_flags":"01"}
{"timestamp":"2025-09-26 10:24:32.415","level":"INFO","service":"api-gateway","message":"Auth: logout_event_published","version":"0.0.1","environment":"development","action":"logout_event_published","userId":"eda1fe9ba4a02358a850363832230b4784b348d1cdbc3771df41129603b9f95b","eventType":"user.logged_out","category":"authentication","trace_id":"33342df2e59b91b884e47ca4717dba20","span_id":"71be634d14d83e2c","trace_flags":"01"}
{"timestamp":"2025-09-26 10:24:32.417","level":"INFO","service":"api-gateway","message":"Auth: end_session_url_built","version":"0.0.1","environment":"development","action":"end_session_url_built","hasIdToken":true,"postLogoutRedirectUri":"http://localhost:3000/","category":"authentication","trace_id":"33342df2e59b91b884e47ca4717dba20","span_id":"3be4a9c8da9f00ce","trace_flags":"01"}
{"timestamp":"2025-09-26 10:24:32.418","level":"INFO","service":"api-gateway","message":"Auth: logout_success","version":"0.0.1","environment":"development","action":"logout_success","hasEndSessionUrl":true,"userId":"eda1fe9ba4a02358a850363832230b4784b348d1cdbc3771df41129603b9f95b","category":"authentication","trace_id":"33342df2e59b91b884e47ca4717dba20","span_id":"3be4a9c8da9f00ce","trace_flags":"01"}
{"timestamp":"2025-09-26 10:24:35.443","level":"INFO","service":"api-gateway","message":"Auth: login_initiation","version":"0.0.1","environment":"development","action":"login_initiation","redirectUri":"http://localhost:3000/auth/callback","traceId":"6e54c4d9bf73c5b2f7cf244d8437e399","category":"authentication","trace_id":"6e54c4d9bf73c5b2f7cf244d8437e399","span_id":"e7ec4ee6ac52b9a7","trace_flags":"01"}
{"timestamp":"2025-09-26 10:49:01.001","level":"INFO","service":"api-gateway","message":"Auth: login_initiation","version":"0.0.1","environment":"development","action":"login_initiation","redirectUri":"http://localhost:3000/auth/callback","traceId":"a0804adad9f49d326e692c2e8f659e71","category":"authentication","trace_id":"a0804adad9f49d326e692c2e8f659e71","span_id":"ca12c2b6c3ff842f","trace_flags":"01"}
{"timestamp":"2025-09-26 10:49:40.686","level":"INFO","service":"api-gateway","message":"Auth: login_initiation","version":"0.0.1","environment":"development","action":"login_initiation","redirectUri":"http://localhost:3000/auth/callback","traceId":"fdf8d7b72929ae9e4f2a9337af079d92","category":"authentication","trace_id":"fdf8d7b72929ae9e4f2a9337af079d92","span_id":"a08f1f7305232c45","trace_flags":"01"}
{"timestamp":"2025-09-26 10:50:11.705","level":"INFO","service":"api-gateway","message":"Auth: login_initiation","version":"0.0.1","environment":"development","action":"login_initiation","redirectUri":"http://localhost:3000/auth/callback","traceId":"491d7bd7df7102610343e12a2e151de4","category":"authentication","trace_id":"491d7bd7df7102610343e12a2e151de4","span_id":"157efe059f567a4c","trace_flags":"01"}
{"timestamp":"2025-09-26 18:43:41.121","level":"INFO","service":"api-gateway","message":"ðŸš€ API Gateway starting up","version":"0.0.1","environment":"development","action":"startup","port":3002,"corsOrigin":"http://localhost:3000","nodeEnv":"development"}
{"timestamp":"2025-09-26 18:43:41.126","level":"INFO","service":"api-gateway","message":"âœ… API Gateway successfully started","version":"0.0.1","environment":"development","action":"startup_complete","port":3002,"url":"http://localhost:3002","features":["authentication","tracing","metrics","kafka_events"]}
{"timestamp":"2025-09-26 18:44:45.655","level":"INFO","service":"api-gateway","message":"ðŸš€ API Gateway starting up","version":"0.0.1","environment":"development","action":"startup","port":3002,"corsOrigin":"http://localhost:3000","nodeEnv":"development"}
{"timestamp":"2025-09-26 18:44:45.661","level":"INFO","service":"api-gateway","message":"âœ… API Gateway successfully started","version":"0.0.1","environment":"development","action":"startup_complete","port":3002,"url":"http://localhost:3002","features":["authentication","tracing","metrics","kafka_events"]}
{"timestamp":"2025-09-26 18:45:09.458","level":"INFO","service":"api-gateway","message":"Auth: login_initiation","version":"0.0.1","environment":"development","action":"login_initiation","redirectUri":"http://localhost:3000/auth/callback","traceId":"2802e5f3a01d2365b7f9e67f89c1113c","category":"authentication","trace_id":"2802e5f3a01d2365b7f9e67f89c1113c","span_id":"bdc15a826dfb1b84","trace_flags":"01"}
{"timestamp":"2025-09-26 18:45:20.593","level":"INFO","service":"api-gateway","message":"Auth: callback_processing","version":"0.0.1","environment":"development","action":"callback_processing","redirectUri":"http://localhost:3000/auth/callback","code":"present","traceId":"32d31b40cb47764f48d6f96281b00e04","category":"authentication","trace_id":"32d31b40cb47764f48d6f96281b00e04","span_id":"fd926cebf07f0cdb","trace_flags":"01"}
{"timestamp":"2025-09-26 18:45:20.716","level":"ERROR","service":"api-gateway","message":"Callback handling failed","version":"0.0.1","environment":"development","action":"callback_failed","traceId":"32d31b40cb47764f48d6f96281b00e04","error":{"name":"Error","message":"Invalid access token received from Keycloak","stack":"Error: Invalid access token received from Keycloak\n    at TokenService.exchangeCodeForTokens (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/token.service.ts:56:15)\n    at async <anonymous> (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/auth.service.ts:144:18)\n    at async <anonymous> (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/tracing/trace.service.ts:46:16)\n    at async TraceService.withSpan (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/tracing/trace.service.ts:45:22)\n    at async <anonymous> (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/auth.service.ts:139:38)\n    at async <anonymous> (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/tracing/trace.service.ts:46:16)\n    at async TraceService.withSpan (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/tracing/trace.service.ts:45:22)\n    at async AuthService.handleCallback (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/auth.service.ts:114:12)\n    at async AuthController.handleCallback (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/auth.controller.ts:37:20)\n    at async <anonymous> (/Users/oleg/www/ai-video-interview/node_modules/@opentelemetry/instrumentation-nestjs-core/src/instrumentation.ts:222:16)"},"trace_id":"32d31b40cb47764f48d6f96281b00e04","span_id":"fd926cebf07f0cdb","trace_flags":"01"}
{"timestamp":"2025-09-26 18:46:12.396","level":"INFO","service":"api-gateway","message":"Auth: login_initiation","version":"0.0.1","environment":"development","action":"login_initiation","redirectUri":"http://localhost:3000/auth/callback","traceId":"2423dcf0324e35533753fc42220b604e","category":"authentication","trace_id":"2423dcf0324e35533753fc42220b604e","span_id":"2c8e98d84f1ea530","trace_flags":"01"}
{"timestamp":"2025-09-26 18:46:12.769","level":"INFO","service":"api-gateway","message":"Auth: callback_processing","version":"0.0.1","environment":"development","action":"callback_processing","redirectUri":"http://localhost:3000/auth/callback","code":"present","traceId":"480cb3bffb27154edb7c4ed032b93c25","category":"authentication","trace_id":"480cb3bffb27154edb7c4ed032b93c25","span_id":"7867c371b08f135f","trace_flags":"01"}
{"timestamp":"2025-09-26 18:46:12.795","level":"ERROR","service":"api-gateway","message":"Callback handling failed","version":"0.0.1","environment":"development","action":"callback_failed","traceId":"480cb3bffb27154edb7c4ed032b93c25","error":{"name":"Error","message":"Invalid access token received from Keycloak","stack":"Error: Invalid access token received from Keycloak\n    at TokenService.exchangeCodeForTokens (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/token.service.ts:56:15)\n    at async <anonymous> (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/auth.service.ts:144:18)\n    at async <anonymous> (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/tracing/trace.service.ts:46:16)\n    at async TraceService.withSpan (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/tracing/trace.service.ts:45:22)\n    at async <anonymous> (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/auth.service.ts:139:38)\n    at async <anonymous> (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/tracing/trace.service.ts:46:16)\n    at async TraceService.withSpan (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/tracing/trace.service.ts:45:22)\n    at async AuthService.handleCallback (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/auth.service.ts:114:12)\n    at async AuthController.handleCallback (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/auth.controller.ts:37:20)\n    at async <anonymous> (/Users/oleg/www/ai-video-interview/node_modules/@opentelemetry/instrumentation-nestjs-core/src/instrumentation.ts:222:16)"},"trace_id":"480cb3bffb27154edb7c4ed032b93c25","span_id":"7867c371b08f135f","trace_flags":"01"}
{"timestamp":"2025-09-26 18:46:57.844","level":"INFO","service":"api-gateway","message":"ðŸš€ API Gateway starting up","version":"0.0.1","environment":"development","action":"startup","port":3002,"corsOrigin":"http://localhost:3000","nodeEnv":"development"}
{"timestamp":"2025-09-26 18:46:57.850","level":"INFO","service":"api-gateway","message":"âœ… API Gateway successfully started","version":"0.0.1","environment":"development","action":"startup_complete","port":3002,"url":"http://localhost:3002","features":["authentication","tracing","metrics","kafka_events"]}
{"timestamp":"2025-09-26 18:47:28.077","level":"INFO","service":"api-gateway","message":"ðŸš€ API Gateway starting up","version":"0.0.1","environment":"development","action":"startup","port":3002,"corsOrigin":"http://localhost:3000","nodeEnv":"development"}
{"timestamp":"2025-09-26 18:47:28.083","level":"INFO","service":"api-gateway","message":"âœ… API Gateway successfully started","version":"0.0.1","environment":"development","action":"startup_complete","port":3002,"url":"http://localhost:3002","features":["authentication","tracing","metrics","kafka_events"]}
{"timestamp":"2025-09-26 18:47:44.823","level":"INFO","service":"api-gateway","message":"ðŸš€ API Gateway starting up","version":"0.0.1","environment":"development","action":"startup","port":3002,"corsOrigin":"http://localhost:3000","nodeEnv":"development"}
{"timestamp":"2025-09-26 18:47:44.829","level":"INFO","service":"api-gateway","message":"âœ… API Gateway successfully started","version":"0.0.1","environment":"development","action":"startup_complete","port":3002,"url":"http://localhost:3002","features":["authentication","tracing","metrics","kafka_events"]}
{"timestamp":"2025-09-26 18:47:54.434","level":"INFO","service":"api-gateway","message":"Auth: login_initiation","version":"0.0.1","environment":"development","action":"login_initiation","redirectUri":"http://localhost:3000/auth/callback","traceId":"aaa3acd0fe1313a99ee8a394d67e7b6d","category":"authentication","trace_id":"aaa3acd0fe1313a99ee8a394d67e7b6d","span_id":"655858c65dca64e3","trace_flags":"01"}
{"timestamp":"2025-09-26 18:47:54.789","level":"INFO","service":"api-gateway","message":"Auth: callback_processing","version":"0.0.1","environment":"development","action":"callback_processing","redirectUri":"http://localhost:3000/auth/callback","code":"present","traceId":"4f7d3a123e7c4635eaef493734b029c0","category":"authentication","trace_id":"4f7d3a123e7c4635eaef493734b029c0","span_id":"d20b07723438e0ab","trace_flags":"01"}
{"timestamp":"2025-09-26 18:47:54.956","level":"INFO","service":"api-gateway","message":"Kafka: publish to user-events success","version":"0.0.1","environment":"development","userId":"698afb11-6fd4-4c87-8069-b3e3df197c4b","authMethod":"oauth2","traceId":"4f7d3a123e7c4635eaef493734b029c0","category":"kafka","action":"publish","topic":"user-events","success":true,"trace_id":"4f7d3a123e7c4635eaef493734b029c0","span_id":"139f0b9113162fac","trace_flags":"01"}
{"timestamp":"2025-09-26 18:51:36.420","level":"INFO","service":"api-gateway","message":"Auth: login_initiation","version":"0.0.1","environment":"development","action":"login_initiation","redirectUri":"http://localhost:3000/auth/callback","traceId":"33ad6c4402689ba9a0a99722f12e1aa7","category":"authentication","trace_id":"33ad6c4402689ba9a0a99722f12e1aa7","span_id":"b9dd0003cf661761","trace_flags":"01"}
{"timestamp":"2025-09-26 18:51:36.716","level":"INFO","service":"api-gateway","message":"Auth: callback_processing","version":"0.0.1","environment":"development","action":"callback_processing","redirectUri":"http://localhost:3000/auth/callback","code":"present","traceId":"113b1335110b0baa9b53e1364be58b83","category":"authentication","trace_id":"113b1335110b0baa9b53e1364be58b83","span_id":"1c031e549bb20114","trace_flags":"01"}
{"timestamp":"2025-09-26 18:51:36.769","level":"INFO","service":"api-gateway","message":"Kafka: publish to user-events success","version":"0.0.1","environment":"development","userId":"698afb11-6fd4-4c87-8069-b3e3df197c4b","authMethod":"oauth2","traceId":"113b1335110b0baa9b53e1364be58b83","category":"kafka","action":"publish","topic":"user-events","success":true,"trace_id":"113b1335110b0baa9b53e1364be58b83","span_id":"dec09b2e1c0d3389","trace_flags":"01"}
{"timestamp":"2025-09-26 18:52:57.021","level":"INFO","service":"api-gateway","message":"ðŸš€ API Gateway starting up","version":"0.0.1","environment":"development","action":"startup","port":3002,"corsOrigin":"http://localhost:3000","nodeEnv":"development"}
{"timestamp":"2025-09-26 18:52:57.027","level":"INFO","service":"api-gateway","message":"âœ… API Gateway successfully started","version":"0.0.1","environment":"development","action":"startup_complete","port":3002,"url":"http://localhost:3002","features":["authentication","tracing","metrics","kafka_events"]}
{"timestamp":"2025-09-26 18:53:05.896","level":"INFO","service":"api-gateway","message":"ðŸš€ API Gateway starting up","version":"0.0.1","environment":"development","action":"startup","port":3002,"corsOrigin":"http://localhost:3000","nodeEnv":"development"}
{"timestamp":"2025-09-26 18:53:05.902","level":"INFO","service":"api-gateway","message":"âœ… API Gateway successfully started","version":"0.0.1","environment":"development","action":"startup_complete","port":3002,"url":"http://localhost:3002","features":["authentication","tracing","metrics","kafka_events"]}
{"timestamp":"2025-09-26 18:53:25.420","level":"INFO","service":"api-gateway","message":"ðŸš€ API Gateway starting up","version":"0.0.1","environment":"development","action":"startup","port":3002,"corsOrigin":"http://localhost:3000","nodeEnv":"development"}
{"timestamp":"2025-09-26 18:53:25.426","level":"INFO","service":"api-gateway","message":"âœ… API Gateway successfully started","version":"0.0.1","environment":"development","action":"startup_complete","port":3002,"url":"http://localhost:3002","features":["authentication","tracing","metrics","kafka_events"]}
{"timestamp":"2025-09-26 18:54:27.909","level":"INFO","service":"api-gateway","message":"Auth: login_initiation","version":"0.0.1","environment":"development","action":"login_initiation","redirectUri":"http://localhost:3000/auth/callback","traceId":"ad6e4e3ff279e4d727afdcf16c5c4373","category":"authentication","trace_id":"ad6e4e3ff279e4d727afdcf16c5c4373","span_id":"2c56186dd4ab8e76","trace_flags":"01"}
{"timestamp":"2025-09-26 18:54:28.247","level":"INFO","service":"api-gateway","message":"Auth: callback_processing","version":"0.0.1","environment":"development","action":"callback_processing","redirectUri":"http://localhost:3000/auth/callback","code":"present","traceId":"5257797721248ae64c10387e8ba503cd","category":"authentication","trace_id":"5257797721248ae64c10387e8ba503cd","span_id":"b97012ccdd82e9c4","trace_flags":"01"}
{"timestamp":"2025-09-26 18:54:28.359","level":"INFO","service":"api-gateway","message":"Kafka: publish to user-events success","version":"0.0.1","environment":"development","userId":"698afb11-6fd4-4c87-8069-b3e3df197c4b","authMethod":"oauth2","traceId":"5257797721248ae64c10387e8ba503cd","category":"kafka","action":"publish","topic":"user-events","success":true,"trace_id":"5257797721248ae64c10387e8ba503cd","span_id":"e4f519ade81399d4","trace_flags":"01"}
{"timestamp":"2025-09-26 18:55:51.728","level":"INFO","service":"api-gateway","message":"ðŸš€ API Gateway starting up","version":"0.0.1","environment":"development","action":"startup","port":3002,"corsOrigin":"http://localhost:3000","nodeEnv":"development"}
{"timestamp":"2025-09-26 18:55:51.734","level":"INFO","service":"api-gateway","message":"âœ… API Gateway successfully started","version":"0.0.1","environment":"development","action":"startup_complete","port":3002,"url":"http://localhost:3002","features":["authentication","tracing","metrics","kafka_events"]}
{"timestamp":"2025-09-26 18:55:54.702","level":"INFO","service":"api-gateway","message":"Auth: login_initiation","version":"0.0.1","environment":"development","action":"login_initiation","redirectUri":"http://localhost:3000/auth/callback","traceId":"f02777aeaa7f5963bbf7a7c3000ce223","category":"authentication","trace_id":"f02777aeaa7f5963bbf7a7c3000ce223","span_id":"63a61b2b51222d5e","trace_flags":"01"}
{"timestamp":"2025-09-26 18:55:55.080","level":"INFO","service":"api-gateway","message":"Auth: callback_processing","version":"0.0.1","environment":"development","action":"callback_processing","redirectUri":"http://localhost:3000/auth/callback","code":"present","traceId":"01b30aeaf9ba46f77617d31c9c5ece27","category":"authentication","trace_id":"01b30aeaf9ba46f77617d31c9c5ece27","span_id":"4a62f1c594a46017","trace_flags":"01"}
{"timestamp":"2025-09-26 18:55:55.192","level":"INFO","service":"api-gateway","message":"Kafka: publish to user-events success","version":"0.0.1","environment":"development","userId":"698afb11-6fd4-4c87-8069-b3e3df197c4b","authMethod":"oauth2","traceId":"01b30aeaf9ba46f77617d31c9c5ece27","category":"kafka","action":"publish","topic":"user-events","success":true,"trace_id":"01b30aeaf9ba46f77617d31c9c5ece27","span_id":"b2413a60939f12bc","trace_flags":"01"}
{"timestamp":"2025-09-26 18:56:42.073","level":"INFO","service":"api-gateway","message":"ðŸš€ API Gateway starting up","version":"0.0.1","environment":"development","action":"startup","port":3002,"corsOrigin":"http://localhost:3000","nodeEnv":"development"}
{"timestamp":"2025-09-26 18:56:42.079","level":"INFO","service":"api-gateway","message":"âœ… API Gateway successfully started","version":"0.0.1","environment":"development","action":"startup_complete","port":3002,"url":"http://localhost:3002","features":["authentication","tracing","metrics","kafka_events"]}
{"timestamp":"2025-09-26 18:56:51.772","level":"INFO","service":"api-gateway","message":"ðŸš€ API Gateway starting up","version":"0.0.1","environment":"development","action":"startup","port":3002,"corsOrigin":"http://localhost:3000","nodeEnv":"development"}
{"timestamp":"2025-09-26 18:56:51.778","level":"INFO","service":"api-gateway","message":"âœ… API Gateway successfully started","version":"0.0.1","environment":"development","action":"startup_complete","port":3002,"url":"http://localhost:3002","features":["authentication","tracing","metrics","kafka_events"]}
{"timestamp":"2025-09-26 18:57:18.674","level":"INFO","service":"api-gateway","message":"ðŸš€ API Gateway starting up","version":"0.0.1","environment":"development","action":"startup","port":3002,"corsOrigin":"http://localhost:3000","nodeEnv":"development"}
{"timestamp":"2025-09-26 18:57:18.680","level":"INFO","service":"api-gateway","message":"âœ… API Gateway successfully started","version":"0.0.1","environment":"development","action":"startup_complete","port":3002,"url":"http://localhost:3002","features":["authentication","tracing","metrics","kafka_events"]}
{"timestamp":"2025-09-26 18:58:07.474","level":"INFO","service":"api-gateway","message":"Auth: login_initiation","version":"0.0.1","environment":"development","action":"login_initiation","redirectUri":"http://localhost:3000/auth/callback","traceId":"ee68e3c1158df2580cbd5dee0ce1802b","category":"authentication","trace_id":"ee68e3c1158df2580cbd5dee0ce1802b","span_id":"b142b99f32a0fefe","trace_flags":"01"}
{"timestamp":"2025-09-26 18:58:07.883","level":"INFO","service":"api-gateway","message":"Auth: callback_processing","version":"0.0.1","environment":"development","action":"callback_processing","redirectUri":"http://localhost:3000/auth/callback","code":"present","traceId":"6606f78ef52e5bec94c2340f27b4b28c","category":"authentication","trace_id":"6606f78ef52e5bec94c2340f27b4b28c","span_id":"752be7231af7a7d3","trace_flags":"01"}
{"timestamp":"2025-09-26 18:58:07.978","level":"INFO","service":"api-gateway","message":"Kafka: publish to user-events success","version":"0.0.1","environment":"development","userId":"698afb11-6fd4-4c87-8069-b3e3df197c4b","authMethod":"oauth2","traceId":"6606f78ef52e5bec94c2340f27b4b28c","category":"kafka","action":"publish","topic":"user-events","success":true,"trace_id":"6606f78ef52e5bec94c2340f27b4b28c","span_id":"147de264bb79aeee","trace_flags":"01"}
{"timestamp":"2025-09-26 19:00:37.849","level":"INFO","service":"api-gateway","message":"ðŸš€ API Gateway starting up","version":"0.0.1","environment":"development","action":"startup","port":3002,"corsOrigin":"http://localhost:3000","nodeEnv":"development"}
{"timestamp":"2025-09-26 19:00:37.855","level":"INFO","service":"api-gateway","message":"âœ… API Gateway successfully started","version":"0.0.1","environment":"development","action":"startup_complete","port":3002,"url":"http://localhost:3002","features":["authentication","tracing","metrics","kafka_events"]}
{"timestamp":"2025-09-26 19:02:13.009","level":"INFO","service":"api-gateway","message":"Auth: login_initiation","version":"0.0.1","environment":"development","action":"login_initiation","redirectUri":"http://localhost:3000/auth/callback","traceId":"a71c8f0e69828125e9f4e84e2fa2015f","category":"authentication","trace_id":"a71c8f0e69828125e9f4e84e2fa2015f","span_id":"764d2a5f4e93f94c","trace_flags":"01"}
{"timestamp":"2025-09-26 19:02:13.386","level":"INFO","service":"api-gateway","message":"Auth: callback_processing","version":"0.0.1","environment":"development","action":"callback_processing","redirectUri":"http://localhost:3000/auth/callback","code":"present","traceId":"3a3b95640ec5d056ba21891d485ad5f9","category":"authentication","trace_id":"3a3b95640ec5d056ba21891d485ad5f9","span_id":"df2a8d8c3ba42455","trace_flags":"01"}
{"timestamp":"2025-09-26 19:02:13.483","level":"INFO","service":"api-gateway","message":"Kafka: publish to user-events success","version":"0.0.1","environment":"development","userId":"698afb11-6fd4-4c87-8069-b3e3df197c4b","authMethod":"oauth2","traceId":"3a3b95640ec5d056ba21891d485ad5f9","category":"kafka","action":"publish","topic":"user-events","success":true,"trace_id":"3a3b95640ec5d056ba21891d485ad5f9","span_id":"8f0fc7a7fe328b0a","trace_flags":"01"}
{"timestamp":"2025-09-26 19:12:22.102","level":"INFO","service":"api-gateway","message":"ðŸš€ API Gateway starting up","version":"0.0.1","environment":"development","action":"startup","port":3002,"corsOrigin":"http://localhost:3000","nodeEnv":"development"}
{"timestamp":"2025-09-26 19:12:22.108","level":"INFO","service":"api-gateway","message":"âœ… API Gateway successfully started","version":"0.0.1","environment":"development","action":"startup_complete","port":3002,"url":"http://localhost:3002","features":["authentication","tracing","metrics","kafka_events"]}
{"timestamp":"2025-09-26 19:14:06.521","level":"INFO","service":"api-gateway","message":"ðŸš€ API Gateway starting up","version":"0.0.1","environment":"development","action":"startup","port":3002,"corsOrigin":"http://localhost:3000","nodeEnv":"development"}
{"timestamp":"2025-09-26 19:14:06.527","level":"INFO","service":"api-gateway","message":"âœ… API Gateway successfully started","version":"0.0.1","environment":"development","action":"startup_complete","port":3002,"url":"http://localhost:3002","features":["authentication","tracing","metrics","kafka_events"]}
{"timestamp":"2025-09-26 19:14:12.393","level":"INFO","service":"api-gateway","message":"Auth: login_initiation","version":"0.0.1","environment":"development","action":"login_initiation","redirectUri":"http://localhost:3000/auth/callback","traceId":"66d7d2106b27328ebe591367a16b88e8","category":"authentication","trace_id":"66d7d2106b27328ebe591367a16b88e8","span_id":"b24f2769c1017e9e","trace_flags":"01"}
{"timestamp":"2025-09-26 19:14:12.717","level":"INFO","service":"api-gateway","message":"Auth: callback_processing","version":"0.0.1","environment":"development","action":"callback_processing","redirectUri":"http://localhost:3000/auth/callback","code":"present","traceId":"d0959f32a7b58661ccc48f77d244f972","category":"authentication","trace_id":"d0959f32a7b58661ccc48f77d244f972","span_id":"25b1540f1cf129a5","trace_flags":"01"}
{"timestamp":"2025-09-26 19:14:12.790","level":"INFO","service":"api-gateway","message":"Kafka: publish to user-events success","version":"0.0.1","environment":"development","userId":"698afb11-6fd4-4c87-8069-b3e3df197c4b","authMethod":"oauth2","traceId":"d0959f32a7b58661ccc48f77d244f972","category":"kafka","action":"publish","topic":"user-events","success":true,"trace_id":"d0959f32a7b58661ccc48f77d244f972","span_id":"edbc6263a7742856","trace_flags":"01"}
{"timestamp":"2025-09-26 19:16:20.204","level":"INFO","service":"api-gateway","message":"ðŸš€ API Gateway starting up","version":"0.0.1","environment":"development","action":"startup","port":3002,"corsOrigin":"http://localhost:3000","nodeEnv":"development"}
{"timestamp":"2025-09-26 19:16:20.210","level":"INFO","service":"api-gateway","message":"âœ… API Gateway successfully started","version":"0.0.1","environment":"development","action":"startup_complete","port":3002,"url":"http://localhost:3002","features":["authentication","tracing","metrics","kafka_events"]}
{"timestamp":"2025-09-26 19:19:13.674","level":"INFO","service":"api-gateway","message":"Auth: logout_event_published","version":"0.0.1","environment":"development","action":"logout_event_published","userId":"unknown","eventType":"user.logged_out","category":"authentication","trace_id":"ea92a8abd848acccde6b9214c9f8af9f","span_id":"5d7d1ee1a59dfe19","trace_flags":"01"}
{"timestamp":"2025-09-26 19:19:13.675","level":"INFO","service":"api-gateway","message":"Auth: end_session_url_built","version":"0.0.1","environment":"development","action":"end_session_url_built","hasIdToken":false,"postLogoutRedirectUri":"http://localhost:3000/","endSessionUrl":"http://localhost:8090/realms/ai-video-interview/protocol/openid-connect/logout?post_logout_redirect_uri=http%3A%2F%2Flocalhost%3A3000%2F","category":"authentication","trace_id":"ea92a8abd848acccde6b9214c9f8af9f","span_id":"8feb476dc7cd04c1","trace_flags":"01"}
{"timestamp":"2025-09-26 19:19:13.675","level":"INFO","service":"api-gateway","message":"Auth: logout_success","version":"0.0.1","environment":"development","action":"logout_success","hasEndSessionUrl":true,"userId":"unknown","category":"authentication","trace_id":"ea92a8abd848acccde6b9214c9f8af9f","span_id":"8feb476dc7cd04c1","trace_flags":"01"}
{"timestamp":"2025-09-26 19:21:30.921","level":"INFO","service":"api-gateway","message":"ðŸš€ API Gateway starting up","version":"0.0.1","environment":"development","action":"startup","port":3002,"corsOrigin":"http://localhost:3000","nodeEnv":"development"}
{"timestamp":"2025-09-26 19:21:30.929","level":"INFO","service":"api-gateway","message":"âœ… API Gateway successfully started","version":"0.0.1","environment":"development","action":"startup_complete","port":3002,"url":"http://localhost:3002","features":["authentication","tracing","metrics","kafka_events"]}
{"timestamp":"2025-09-26 19:22:25.057","level":"INFO","service":"api-gateway","message":"ðŸš€ API Gateway starting up","version":"0.0.1","environment":"development","action":"startup","port":3002,"corsOrigin":"http://localhost:3000","nodeEnv":"development"}
{"timestamp":"2025-09-26 19:22:25.063","level":"INFO","service":"api-gateway","message":"âœ… API Gateway successfully started","version":"0.0.1","environment":"development","action":"startup_complete","port":3002,"url":"http://localhost:3002","features":["authentication","tracing","metrics","kafka_events"]}
{"timestamp":"2025-09-26 19:22:54.117","level":"INFO","service":"api-gateway","message":"Auth: login_initiation","version":"0.0.1","environment":"development","action":"login_initiation","redirectUri":"http://localhost:3000/auth/callback","traceId":"ebbcfc934694de3d7c1461a234b57a1c","category":"authentication","trace_id":"ebbcfc934694de3d7c1461a234b57a1c","span_id":"4e2001574d2f9adc","trace_flags":"01"}
{"timestamp":"2025-09-26 19:23:02.941","level":"INFO","service":"api-gateway","message":"Auth: callback_processing","version":"0.0.1","environment":"development","action":"callback_processing","redirectUri":"http://localhost:3000/auth/callback","code":"present","traceId":"cd30b29c59a59bac142e010183bedb9c","category":"authentication","trace_id":"cd30b29c59a59bac142e010183bedb9c","span_id":"662475a593367048","trace_flags":"01"}
{"timestamp":"2025-09-26 19:23:03.097","level":"INFO","service":"api-gateway","message":"Kafka: publish to user-events success","version":"0.0.1","environment":"development","userId":"698afb11-6fd4-4c87-8069-b3e3df197c4b","authMethod":"oauth2","traceId":"cd30b29c59a59bac142e010183bedb9c","category":"kafka","action":"publish","topic":"user-events","success":true,"trace_id":"cd30b29c59a59bac142e010183bedb9c","span_id":"0aa7c8f826b6e03b","trace_flags":"01"}
{"timestamp":"2025-09-26 19:23:14.526","level":"INFO","service":"api-gateway","message":"Auth: logout_token_extraction","version":"0.0.1","environment":"development","action":"logout_token_extraction","from_body":{"has_access_token":false,"has_refresh_token":false,"has_id_token":false},"from_cookies":{"has_access_token":true,"has_refresh_token":true,"has_id_token":true},"final_tokens":{"has_access_token":true,"has_refresh_token":true,"has_id_token":true},"category":"authentication","trace_id":"7944af5663e49a6bf3da77d2236def66","span_id":"4b7fe2249f84fad8","trace_flags":"01"}
{"timestamp":"2025-09-26 19:23:14.593","level":"INFO","service":"api-gateway","message":"Auth: logout_event_published","version":"0.0.1","environment":"development","action":"logout_event_published","userId":"698afb11-6fd4-4c87-8069-b3e3df197c4b","eventType":"user.logged_out","category":"authentication","trace_id":"7944af5663e49a6bf3da77d2236def66","span_id":"48f5daa5fdc5acb3","trace_flags":"01"}
{"timestamp":"2025-09-26 19:23:14.593","level":"INFO","service":"api-gateway","message":"Auth: logout_build_end_session","version":"0.0.1","environment":"development","action":"logout_build_end_session","hasIdToken":true,"idTokenPreview":"eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6IC...","category":"authentication","trace_id":"7944af5663e49a6bf3da77d2236def66","span_id":"4b7fe2249f84fad8","trace_flags":"01"}
{"timestamp":"2025-09-26 19:23:14.593","level":"INFO","service":"api-gateway","message":"Auth: end_session_url_built","version":"0.0.1","environment":"development","action":"end_session_url_built","hasIdToken":true,"postLogoutRedirectUri":"http://localhost:3000/","endSessionUrl":"http://localhost:8090/realms/ai-video-interview/protocol/openid-connect/logout?id_token_hint=eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJxNVBXcGJTTV9KWDR2ekZDT1NWUmttckdqZFJvbWtmUHNwNjJueTFyUXAwIn0.eyJleHAiOjE3NTg5MDQwODIsImlhdCI6MTc1ODkwMzc4MiwiYXV0aF90aW1lIjoxNzU4OTAzNzgyLCJqdGkiOiJjNDYwYjVkNC1lMDRiLTY5N2ItYTFkYS0yODdjYTg5MTFmZDAiLCJpc3MiOiJodHRwOi8vbG9jYWxob3N0OjgwOTAvcmVhbG1zL2FpLXZpZGVvLWludGVydmlldyIsImF1ZCI6ImFpLXZpZGVvLWludGVydmlldy1hcHAiLCJzdWIiOiI2OThhZmIxMS02ZmQ0LTRjODctODA2OS1iM2UzZGYxOTdjNGIiLCJ0eXAiOiJJRCIsImF6cCI6ImFpLXZpZGVvLWludGVydmlldy1hcHAiLCJzaWQiOiJlOTUxYjE1NS1mZTQ4LTRjN2UtODYzOC0zYTMxYzYwYzNkM2QiLCJhdF9oYXNoIjoia1JaSjYxN2pIaFVUTVZYSmF5WDgtdyIsImFjciI6IjEiLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwibmFtZSI6IlRlc3QgVXNlciIsInByZWZlcnJlZF91c2VybmFtZSI6InRlc3R1c2VyIiwiZ2l2ZW5fbmFtZSI6IlRlc3QiLCJmYW1pbHlfbmFtZSI6IlVzZXIiLCJlbWFpbCI6InRlc3RAYWktaW50ZXJ2aWV3LmNvbSJ9.P0EbVMauSyx-juZU2BseuCD6KdW6oNXFE3QtxxPmhZsbiEzW25CDmKjbpic3ZQObr3LCSIUV5hGCO-Sceal4nh7rN8Y14ntbJc9gG1A-T3hvaRskQJx_yZqVwvvWw76K_Fye9Y4Shs0C4Jce8PaMdNSILI3QndvMwSQfh0I3-b0VA-b7BT2X4XRWrxzcvwxrR6f2cvQdgvwO1YEQow8bi6Pk8bnKyB6Qo1a1AOBkHAXckQ5VrZoxo5Ir84j5BXLiIMe3i0GenW4ukYbkdulf1C-dPPdgVdzEgKt_YGIb5fN9Cu8Txkpqv9LnvZwleWJ-TyoqPruR2cP7zHUicbS4kg&post_logout_redirect_uri=http%3A%2F%2Flocalhost%3A3000%2F","category":"authentication","trace_id":"7944af5663e49a6bf3da77d2236def66","span_id":"4b7fe2249f84fad8","trace_flags":"01"}
{"timestamp":"2025-09-26 19:23:14.594","level":"INFO","service":"api-gateway","message":"Auth: logout_success","version":"0.0.1","environment":"development","action":"logout_success","hasEndSessionUrl":true,"userId":"698afb11-6fd4-4c87-8069-b3e3df197c4b","category":"authentication","trace_id":"7944af5663e49a6bf3da77d2236def66","span_id":"4b7fe2249f84fad8","trace_flags":"01"}
{"timestamp":"2025-09-26 19:29:49.283","level":"INFO","service":"api-gateway","message":"Auth: login_initiation","version":"0.0.1","environment":"development","action":"login_initiation","redirectUri":"http://localhost:3000/auth/callback","traceId":"d0731cc8152b1944c16c520853c8850f","category":"authentication","trace_id":"d0731cc8152b1944c16c520853c8850f","span_id":"ceb9a292b62bcb22","trace_flags":"01"}
{"timestamp":"2025-09-26 19:29:58.308","level":"INFO","service":"api-gateway","message":"Auth: callback_processing","version":"0.0.1","environment":"development","action":"callback_processing","redirectUri":"http://localhost:3000/auth/callback","code":"present","traceId":"582fb634056c495db6d6efd77473878f","category":"authentication","trace_id":"582fb634056c495db6d6efd77473878f","span_id":"1244b5d998f14a79","trace_flags":"01"}
{"timestamp":"2025-09-26 19:29:58.360","level":"INFO","service":"api-gateway","message":"Kafka: publish to user-events success","version":"0.0.1","environment":"development","userId":"698afb11-6fd4-4c87-8069-b3e3df197c4b","authMethod":"oauth2","traceId":"582fb634056c495db6d6efd77473878f","category":"kafka","action":"publish","topic":"user-events","success":true,"trace_id":"582fb634056c495db6d6efd77473878f","span_id":"a01e0625f13e21c6","trace_flags":"01"}
{"timestamp":"2025-09-26 19:37:20.523","level":"INFO","service":"api-gateway","message":"Auth: login_initiation","version":"0.0.1","environment":"development","action":"login_initiation","redirectUri":"http://localhost:3000/auth/callback","traceId":"9056295396a22dcbdb64dfbbc806a30b","category":"authentication","trace_id":"9056295396a22dcbdb64dfbbc806a30b","span_id":"4ae55032c7a62627","trace_flags":"01"}
{"timestamp":"2025-09-26 19:37:20.844","level":"INFO","service":"api-gateway","message":"Auth: callback_processing","version":"0.0.1","environment":"development","action":"callback_processing","redirectUri":"http://localhost:3000/auth/callback","code":"present","traceId":"3ebba1bbf5414e83109d1bb66631db07","category":"authentication","trace_id":"3ebba1bbf5414e83109d1bb66631db07","span_id":"1d075270129dba62","trace_flags":"01"}
{"timestamp":"2025-09-26 19:37:20.884","level":"INFO","service":"api-gateway","message":"Kafka: publish to user-events success","version":"0.0.1","environment":"development","userId":"698afb11-6fd4-4c87-8069-b3e3df197c4b","authMethod":"oauth2","traceId":"3ebba1bbf5414e83109d1bb66631db07","category":"kafka","action":"publish","topic":"user-events","success":true,"trace_id":"3ebba1bbf5414e83109d1bb66631db07","span_id":"71d977e4d165eb80","trace_flags":"01"}
{"timestamp":"2025-09-26 19:37:39.906","level":"INFO","service":"api-gateway","message":"Auth: logout_token_extraction","version":"0.0.1","environment":"development","action":"logout_token_extraction","from_body":{"has_access_token":false,"has_refresh_token":false,"has_id_token":false},"from_cookies":{"has_access_token":true,"has_refresh_token":true,"has_id_token":true},"final_tokens":{"has_access_token":true,"has_refresh_token":true,"has_id_token":true},"category":"authentication","trace_id":"cce4c9433d200cbb23bf27a401f0f23e","span_id":"ec2e81b211b95308","trace_flags":"01"}
{"timestamp":"2025-09-26 19:37:40.009","level":"INFO","service":"api-gateway","message":"Auth: logout_event_published","version":"0.0.1","environment":"development","action":"logout_event_published","userId":"698afb11-6fd4-4c87-8069-b3e3df197c4b","eventType":"user.logged_out","category":"authentication","trace_id":"cce4c9433d200cbb23bf27a401f0f23e","span_id":"c80035537f24e60a","trace_flags":"01"}
{"timestamp":"2025-09-26 19:37:40.009","level":"INFO","service":"api-gateway","message":"Auth: logout_build_end_session","version":"0.0.1","environment":"development","action":"logout_build_end_session","hasIdToken":true,"idTokenPreview":"eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6IC...","category":"authentication","trace_id":"cce4c9433d200cbb23bf27a401f0f23e","span_id":"ec2e81b211b95308","trace_flags":"01"}
{"timestamp":"2025-09-26 19:37:40.010","level":"INFO","service":"api-gateway","message":"Auth: end_session_url_built","version":"0.0.1","environment":"development","action":"end_session_url_built","hasIdToken":true,"postLogoutRedirectUri":"http://localhost:3000/","endSessionUrl":"http://localhost:8090/realms/ai-video-interview/protocol/openid-connect/logout?id_token_hint=eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJxNVBXcGJTTV9KWDR2ekZDT1NWUmttckdqZFJvbWtmUHNwNjJueTFyUXAwIn0.eyJleHAiOjE3NTg5MDQ5NDAsImlhdCI6MTc1ODkwNDY0MCwiYXV0aF90aW1lIjoxNzU4OTA0MTk3LCJqdGkiOiIxODE1NThmYS04ZmQyLTdhYjItZjQ0ZC1mNjFiOWZiN2I3MjIiLCJpc3MiOiJodHRwOi8vbG9jYWxob3N0OjgwOTAvcmVhbG1zL2FpLXZpZGVvLWludGVydmlldyIsImF1ZCI6ImFpLXZpZGVvLWludGVydmlldy1hcHAiLCJzdWIiOiI2OThhZmIxMS02ZmQ0LTRjODctODA2OS1iM2UzZGYxOTdjNGIiLCJ0eXAiOiJJRCIsImF6cCI6ImFpLXZpZGVvLWludGVydmlldy1hcHAiLCJzaWQiOiJlNGFiZWQ3Yi05ODU5LTQ3NDQtYjIyMC1hZWMxNTBmYzE0MzEiLCJhdF9oYXNoIjoiY2FrZ2I0WlV6SlBLeUgxN2NsczBpUSIsImFjciI6IjAiLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwibmFtZSI6IlRlc3QgVXNlciIsInByZWZlcnJlZF91c2VybmFtZSI6InRlc3R1c2VyIiwiZ2l2ZW5fbmFtZSI6IlRlc3QiLCJmYW1pbHlfbmFtZSI6IlVzZXIiLCJlbWFpbCI6InRlc3RAYWktaW50ZXJ2aWV3LmNvbSJ9.BL_DR41jC-ToaNJVsz8LM-0H5nq8Z_jWMj8oNkGCBCvMyqx5ncS1YmdSXWpjtYT3ovry35HHRWyxg0eUhIGpRl7n-AFSccl-R2Di6vwTlwCYVy_b3lnrKe1h6wDXWEjrcONtpPxUMgEjvLAmVWyZm0X6zUcbppWslQYzMteiEUEvNnPm0gof9QOGQ0nf98atACqYtxKgNcUxyELQWV9SvjmS9WLfm8B9YQn7wJgjJ0DnTLjvEKRHiwRh6B__t2eFVgtWnSwDJNCqNOxI6KSIPhGR7lzWUlCyQi2I5M9CcWMx5JRI1dO7hOaY62FaLse7TIRRUHTCILdfl2IcpiYBPQ&post_logout_redirect_uri=http%3A%2F%2Flocalhost%3A3000%2F","category":"authentication","trace_id":"cce4c9433d200cbb23bf27a401f0f23e","span_id":"ec2e81b211b95308","trace_flags":"01"}
{"timestamp":"2025-09-26 19:37:40.010","level":"INFO","service":"api-gateway","message":"Auth: logout_success","version":"0.0.1","environment":"development","action":"logout_success","hasEndSessionUrl":true,"userId":"698afb11-6fd4-4c87-8069-b3e3df197c4b","category":"authentication","trace_id":"cce4c9433d200cbb23bf27a401f0f23e","span_id":"ec2e81b211b95308","trace_flags":"01"}
{"timestamp":"2025-09-26 19:37:49.952","level":"INFO","service":"api-gateway","message":"Auth: login_initiation","version":"0.0.1","environment":"development","action":"login_initiation","redirectUri":"http://localhost:3000/auth/callback","traceId":"389fefce25e1bf2a9a1dcf0ef1964c9c","category":"authentication","trace_id":"389fefce25e1bf2a9a1dcf0ef1964c9c","span_id":"7fb955badbc2c265","trace_flags":"01"}
{"timestamp":"2025-09-26 19:37:56.960","level":"INFO","service":"api-gateway","message":"Auth: callback_processing","version":"0.0.1","environment":"development","action":"callback_processing","redirectUri":"http://localhost:3000/auth/callback","code":"present","traceId":"cead13d21a8ad4044902513ac715cb29","category":"authentication","trace_id":"cead13d21a8ad4044902513ac715cb29","span_id":"264f8941159c90da","trace_flags":"01"}
{"timestamp":"2025-09-26 19:37:56.984","level":"INFO","service":"api-gateway","message":"Kafka: publish to user-events success","version":"0.0.1","environment":"development","userId":"698afb11-6fd4-4c87-8069-b3e3df197c4b","authMethod":"oauth2","traceId":"cead13d21a8ad4044902513ac715cb29","category":"kafka","action":"publish","topic":"user-events","success":true,"trace_id":"cead13d21a8ad4044902513ac715cb29","span_id":"85d5cac697a0584c","trace_flags":"01"}
{"timestamp":"2025-09-26 19:41:34.338","level":"INFO","service":"api-gateway","message":"Auth: logout_token_extraction","version":"0.0.1","environment":"development","action":"logout_token_extraction","from_body":{"has_access_token":false,"has_refresh_token":false,"has_id_token":false},"from_cookies":{"has_access_token":true,"has_refresh_token":true,"has_id_token":true},"final_tokens":{"has_access_token":true,"has_refresh_token":true,"has_id_token":true},"category":"authentication","trace_id":"0578f0f9c56bb2150eaed99d1d1773ad","span_id":"eed7827c6e6adf1d","trace_flags":"01"}
{"timestamp":"2025-09-26 19:41:34.431","level":"INFO","service":"api-gateway","message":"Auth: logout_event_published","version":"0.0.1","environment":"development","action":"logout_event_published","userId":"698afb11-6fd4-4c87-8069-b3e3df197c4b","eventType":"user.logged_out","category":"authentication","trace_id":"0578f0f9c56bb2150eaed99d1d1773ad","span_id":"feccd009f74e6c85","trace_flags":"01"}
{"timestamp":"2025-09-26 19:41:34.431","level":"INFO","service":"api-gateway","message":"Auth: logout_build_end_session","version":"0.0.1","environment":"development","action":"logout_build_end_session","hasIdToken":true,"idTokenPreview":"eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6IC...","category":"authentication","trace_id":"0578f0f9c56bb2150eaed99d1d1773ad","span_id":"eed7827c6e6adf1d","trace_flags":"01"}
{"timestamp":"2025-09-26 19:41:34.431","level":"INFO","service":"api-gateway","message":"Auth: end_session_url_built","version":"0.0.1","environment":"development","action":"end_session_url_built","hasIdToken":true,"postLogoutRedirectUri":"http://localhost:3000/","endSessionUrl":"http://localhost:8090/realms/ai-video-interview/protocol/openid-connect/logout?id_token_hint=eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJxNVBXcGJTTV9KWDR2ekZDT1NWUmttckdqZFJvbWtmUHNwNjJueTFyUXAwIn0.eyJleHAiOjE3NTg5MDQ5NzYsImlhdCI6MTc1ODkwNDY3NiwiYXV0aF90aW1lIjoxNzU4OTA0Njc2LCJqdGkiOiJlNWEzMWM4NS0yMGM5LTRmZmUtMTRlNi0xNGIxMzdlZGJjMTMiLCJpc3MiOiJodHRwOi8vbG9jYWxob3N0OjgwOTAvcmVhbG1zL2FpLXZpZGVvLWludGVydmlldyIsImF1ZCI6ImFpLXZpZGVvLWludGVydmlldy1hcHAiLCJzdWIiOiI2OThhZmIxMS02ZmQ0LTRjODctODA2OS1iM2UzZGYxOTdjNGIiLCJ0eXAiOiJJRCIsImF6cCI6ImFpLXZpZGVvLWludGVydmlldy1hcHAiLCJzaWQiOiJlZjNlZTA4Ni0zY2YzLTRlZTEtYjM3NC04NmRiOWY4YjNkYjciLCJhdF9oYXNoIjoiVXRQcEh5cmp0bEwwd2RGNm9ZeDBQdyIsImFjciI6IjEiLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwibmFtZSI6IlRlc3QgVXNlciIsInByZWZlcnJlZF91c2VybmFtZSI6InRlc3R1c2VyIiwiZ2l2ZW5fbmFtZSI6IlRlc3QiLCJmYW1pbHlfbmFtZSI6IlVzZXIiLCJlbWFpbCI6InRlc3RAYWktaW50ZXJ2aWV3LmNvbSJ9.j-BfMwpD8gQGZAMsdcus_gc_fJQlJqdo6ctA_HjN4_BBeFi4ouJToNMGkBXfVLI9y2jNjKlT_cGAvZ6QPaWWUDulkqGCWim2BwltIrsKF07MP05BF9e9xqfHqj-yh-VhZ6P34JEj2V3RLbSjSUqphCX9tFLpVptLd9ce8iwqeDnjj9p5aMLaZ2GNV2f7yNVH5NQtMHByqPmeuI7dy9oDsyXXhUR8AAmdVM2wklgiA2R0-hM4De1cI7EfR2KaFXD_Ecunax3POJoP8aO8y1rNXvAebHDWfN6BGkKSUlLdxF3EDfN5mzn5yIUMPmDRrA0z1DWjAguk6b4cUzGFrFs3BQ&post_logout_redirect_uri=http%3A%2F%2Flocalhost%3A3000%2F","category":"authentication","trace_id":"0578f0f9c56bb2150eaed99d1d1773ad","span_id":"eed7827c6e6adf1d","trace_flags":"01"}
{"timestamp":"2025-09-26 19:41:34.432","level":"INFO","service":"api-gateway","message":"Auth: logout_success","version":"0.0.1","environment":"development","action":"logout_success","hasEndSessionUrl":true,"userId":"698afb11-6fd4-4c87-8069-b3e3df197c4b","category":"authentication","trace_id":"0578f0f9c56bb2150eaed99d1d1773ad","span_id":"eed7827c6e6adf1d","trace_flags":"01"}
{"timestamp":"2025-09-26 19:41:36.833","level":"INFO","service":"api-gateway","message":"Auth: login_initiation","version":"0.0.1","environment":"development","action":"login_initiation","redirectUri":"http://localhost:3000/auth/callback","traceId":"138c532caffa05c98c3e6660737c5ea1","category":"authentication","trace_id":"138c532caffa05c98c3e6660737c5ea1","span_id":"0b7a4cb4127dcdde","trace_flags":"01"}
{"timestamp":"2025-09-26 19:41:45.240","level":"INFO","service":"api-gateway","message":"Auth: callback_processing","version":"0.0.1","environment":"development","action":"callback_processing","redirectUri":"http://localhost:3000/auth/callback","code":"present","traceId":"9c97d52e8350d3512290207a94d5d06a","category":"authentication","trace_id":"9c97d52e8350d3512290207a94d5d06a","span_id":"288489552cf4346c","trace_flags":"01"}
{"timestamp":"2025-09-26 19:41:45.290","level":"INFO","service":"api-gateway","message":"Kafka: publish to user-events success","version":"0.0.1","environment":"development","userId":"698afb11-6fd4-4c87-8069-b3e3df197c4b","authMethod":"oauth2","traceId":"9c97d52e8350d3512290207a94d5d06a","category":"kafka","action":"publish","topic":"user-events","success":true,"trace_id":"9c97d52e8350d3512290207a94d5d06a","span_id":"89145166c398353b","trace_flags":"01"}
{"timestamp":"2025-09-26 21:51:37.243","level":"INFO","service":"api-gateway","message":"ðŸš€ API Gateway starting up","version":"0.0.1","environment":"development","action":"startup","port":3002,"corsOrigin":"http://localhost:3000","nodeEnv":"development"}
{"timestamp":"2025-09-26 21:51:37.251","level":"INFO","service":"api-gateway","message":"âœ… API Gateway successfully started","version":"0.0.1","environment":"development","action":"startup_complete","port":3002,"url":"http://localhost:3002","features":["authentication","tracing","metrics","kafka_events"]}
{"timestamp":"2025-09-26 21:51:51.157","level":"INFO","service":"api-gateway","message":"ðŸš€ API Gateway starting up","version":"0.0.1","environment":"development","action":"startup","port":3002,"corsOrigin":"http://localhost:3000","nodeEnv":"development"}
{"timestamp":"2025-09-26 21:51:51.163","level":"INFO","service":"api-gateway","message":"âœ… API Gateway successfully started","version":"0.0.1","environment":"development","action":"startup_complete","port":3002,"url":"http://localhost:3002","features":["authentication","tracing","metrics","kafka_events"]}
{"timestamp":"2025-09-26 21:52:02.621","level":"INFO","service":"api-gateway","message":"ðŸš€ API Gateway starting up","version":"0.0.1","environment":"development","action":"startup","port":3002,"corsOrigin":"http://localhost:3000","nodeEnv":"development"}
{"timestamp":"2025-09-26 21:52:02.627","level":"INFO","service":"api-gateway","message":"âœ… API Gateway successfully started","version":"0.0.1","environment":"development","action":"startup_complete","port":3002,"url":"http://localhost:3002","features":["authentication","tracing","metrics","kafka_events"]}
{"timestamp":"2025-09-26 22:01:01.438","level":"ERROR","service":"api-gateway","message":"Token refresh failed","version":"0.0.1","environment":"development","action":"refresh_failed","error":{"name":"Error","message":"Token refresh failed: 400 Bad Request","stack":"Error: Token refresh failed: 400 Bad Request\n    at KeycloakService.refreshToken (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/keycloak.service.ts:124:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async TokenService.refreshTokens (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/token.service.ts:97:22)\n    at async AuthService.refreshTokens (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/auth.service.ts:207:26)\n    at async AuthController.refresh (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/auth.controller.ts:53:20)\n    at async <anonymous> (/Users/oleg/www/ai-video-interview/node_modules/@opentelemetry/instrumentation-nestjs-core/src/instrumentation.ts:222:16)"},"trace_id":"cfc5cd3478903b807b2bf598a0a62346","span_id":"70c11bc05516e9d5","trace_flags":"01"}
{"timestamp":"2025-09-26 22:01:03.762","level":"ERROR","service":"api-gateway","message":"Token refresh failed","version":"0.0.1","environment":"development","action":"refresh_failed","error":{"name":"Error","message":"Token refresh failed: 400 Bad Request","stack":"Error: Token refresh failed: 400 Bad Request\n    at KeycloakService.refreshToken (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/keycloak.service.ts:124:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async TokenService.refreshTokens (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/token.service.ts:97:22)\n    at async AuthService.refreshTokens (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/auth.service.ts:207:26)\n    at async AuthController.refresh (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/auth.controller.ts:53:20)\n    at async <anonymous> (/Users/oleg/www/ai-video-interview/node_modules/@opentelemetry/instrumentation-nestjs-core/src/instrumentation.ts:222:16)"},"trace_id":"aaac061cea07b3be4f53d61fb7062024","span_id":"4392a79872847027","trace_flags":"01"}
{"timestamp":"2025-09-26 22:01:04.665","level":"ERROR","service":"api-gateway","message":"Token refresh failed","version":"0.0.1","environment":"development","action":"refresh_failed","error":{"name":"Error","message":"Token refresh failed: 400 Bad Request","stack":"Error: Token refresh failed: 400 Bad Request\n    at KeycloakService.refreshToken (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/keycloak.service.ts:124:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async TokenService.refreshTokens (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/token.service.ts:97:22)\n    at async AuthService.refreshTokens (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/auth.service.ts:207:26)\n    at async AuthController.refresh (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/auth.controller.ts:53:20)\n    at async <anonymous> (/Users/oleg/www/ai-video-interview/node_modules/@opentelemetry/instrumentation-nestjs-core/src/instrumentation.ts:222:16)"},"trace_id":"93cb545dd09aca6a25897acd9e915ed7","span_id":"a34f2ea8af53fbc0","trace_flags":"01"}
{"timestamp":"2025-09-26 22:01:05.516","level":"ERROR","service":"api-gateway","message":"Token refresh failed","version":"0.0.1","environment":"development","action":"refresh_failed","error":{"name":"Error","message":"Token refresh failed: 400 Bad Request","stack":"Error: Token refresh failed: 400 Bad Request\n    at KeycloakService.refreshToken (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/keycloak.service.ts:124:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async TokenService.refreshTokens (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/token.service.ts:97:22)\n    at async AuthService.refreshTokens (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/auth.service.ts:207:26)\n    at async AuthController.refresh (/Users/oleg/www/ai-video-interview/apps/api-gateway/src/auth/auth.controller.ts:53:20)\n    at async <anonymous> (/Users/oleg/www/ai-video-interview/node_modules/@opentelemetry/instrumentation-nestjs-core/src/instrumentation.ts:222:16)"},"trace_id":"56c6b81adc598d59107f0d359505deb2","span_id":"919cfb0f5e0610e2","trace_flags":"01"}
{"timestamp":"2025-09-26 22:02:43.529","level":"INFO","service":"api-gateway","message":"ðŸš€ API Gateway starting up","version":"0.0.1","environment":"development","action":"startup","port":3002,"corsOrigin":"http://localhost:3000","nodeEnv":"development"}
{"timestamp":"2025-09-26 22:02:43.535","level":"INFO","service":"api-gateway","message":"âœ… API Gateway successfully started","version":"0.0.1","environment":"development","action":"startup_complete","port":3002,"url":"http://localhost:3002","features":["authentication","tracing","metrics","kafka_events"]}
{"timestamp":"2025-09-26 22:03:17.775","level":"INFO","service":"api-gateway","message":"ðŸš€ API Gateway starting up","version":"0.0.1","environment":"development","action":"startup","port":3002,"corsOrigin":"http://localhost:3000","nodeEnv":"development"}
{"timestamp":"2025-09-26 22:03:17.781","level":"INFO","service":"api-gateway","message":"âœ… API Gateway successfully started","version":"0.0.1","environment":"development","action":"startup_complete","port":3002,"url":"http://localhost:3002","features":["authentication","tracing","metrics","kafka_events"]}
{"timestamp":"2025-09-26 22:06:28.924","level":"INFO","service":"api-gateway","message":"ðŸš€ API Gateway starting up","version":"0.0.1","environment":"development","action":"startup","port":3002,"corsOrigin":"http://localhost:3000","nodeEnv":"development"}
{"timestamp":"2025-09-26 22:06:28.931","level":"INFO","service":"api-gateway","message":"âœ… API Gateway successfully started","version":"0.0.1","environment":"development","action":"startup_complete","port":3002,"url":"http://localhost:3002","features":["authentication","tracing","metrics","kafka_events"]}
{"timestamp":"2025-09-26 22:11:09.730","level":"INFO","service":"api-gateway","message":"ðŸš€ API Gateway starting up","version":"0.0.1","environment":"development","action":"startup","port":3002,"corsOrigin":"http://localhost:3000","nodeEnv":"development"}
{"timestamp":"2025-09-26 22:11:09.736","level":"INFO","service":"api-gateway","message":"âœ… API Gateway successfully started","version":"0.0.1","environment":"development","action":"startup_complete","port":3002,"url":"http://localhost:3002","features":["authentication","tracing","metrics","kafka_events"]}
{"timestamp":"2025-09-26 22:13:12.930","level":"INFO","service":"api-gateway","message":"ðŸš€ API Gateway starting up","version":"0.0.1","environment":"development","action":"startup","port":3002,"corsOrigin":"http://localhost:3000","nodeEnv":"development"}
{"timestamp":"2025-09-26 22:13:12.936","level":"INFO","service":"api-gateway","message":"âœ… API Gateway successfully started","version":"0.0.1","environment":"development","action":"startup_complete","port":3002,"url":"http://localhost:3002","features":["authentication","tracing","metrics","kafka_events"]}
{"timestamp":"2025-09-26 22:13:33.507","level":"WARN","service":"api-gateway","message":"No refresh token found in body or cookies","version":"0.0.1","environment":"development","action":"refresh_token_missing","trace_id":"87b52b4b9527f964165c6c096f93c1d9","span_id":"58f68cdfaab0ae01","trace_flags":"01"}
{"timestamp":"2025-09-26 22:13:33.851","level":"WARN","service":"api-gateway","message":"No refresh token found in body or cookies","version":"0.0.1","environment":"development","action":"refresh_token_missing","trace_id":"f8d22eaebb2d0fd7c6daad0a843c19f3","span_id":"4b5923ceb99f8ae6","trace_flags":"01"}
{"timestamp":"2025-09-26 22:13:35.047","level":"WARN","service":"api-gateway","message":"No refresh token found in body or cookies","version":"0.0.1","environment":"development","action":"refresh_token_missing","trace_id":"c093b3347edb86782773c53251f00610","span_id":"754681c07160c89b","trace_flags":"01"}
{"timestamp":"2025-09-26 22:13:35.937","level":"WARN","service":"api-gateway","message":"No refresh token found in body or cookies","version":"0.0.1","environment":"development","action":"refresh_token_missing","trace_id":"43f3601e3f2b7afafed14b040a9d6f96","span_id":"b5d615b5224a953a","trace_flags":"01"}
{"timestamp":"2025-09-26 22:13:38.863","level":"INFO","service":"api-gateway","message":"Auth: login_initiation","version":"0.0.1","environment":"development","action":"login_initiation","redirectUri":"http://localhost:3000/auth/callback","traceId":"f33181bc17a198c63f712629780da0a1","category":"authentication","trace_id":"f33181bc17a198c63f712629780da0a1","span_id":"36f9b934ef343b26","trace_flags":"01"}
{"timestamp":"2025-09-26 22:13:55.561","level":"INFO","service":"api-gateway","message":"Auth: callback_processing","version":"0.0.1","environment":"development","action":"callback_processing","redirectUri":"http://localhost:3000/auth/callback","code":"present","traceId":"5570c1dbda2cfae92a94234bffb0e21d","category":"authentication","trace_id":"5570c1dbda2cfae92a94234bffb0e21d","span_id":"a60dd10be75f14c6","trace_flags":"01"}
{"timestamp":"2025-09-26 22:13:55.643","level":"INFO","service":"api-gateway","message":"Kafka: publish to user-events success","version":"0.0.1","environment":"development","userId":"698afb11-6fd4-4c87-8069-b3e3df197c4b","authMethod":"oauth2","traceId":"5570c1dbda2cfae92a94234bffb0e21d","category":"kafka","action":"publish","topic":"user-events","success":true,"trace_id":"5570c1dbda2cfae92a94234bffb0e21d","span_id":"2640b5a19661c9b2","trace_flags":"01"}
{"timestamp":"2025-09-26 22:23:53.069","level":"INFO","service":"api-gateway","message":"Kafka: publish to user-events success","version":"0.0.1","environment":"development","authMethod":"jwt_refresh","category":"kafka","action":"publish","topic":"user-events","success":true,"trace_id":"71189d7684816aa3eb2d9e3d941c55f7","span_id":"3f69cc99e66c4535","trace_flags":"01"}
{"timestamp":"2025-09-26 22:23:53.070","level":"INFO","service":"api-gateway","message":"Auth: token_refresh_success","version":"0.0.1","environment":"development","action":"token_refresh_success","category":"authentication","trace_id":"71189d7684816aa3eb2d9e3d941c55f7","span_id":"3f69cc99e66c4535","trace_flags":"01"}
{"timestamp":"2025-09-26 22:34:18.510","level":"INFO","service":"api-gateway","message":"Kafka: publish to user-events success","version":"0.0.1","environment":"development","authMethod":"jwt_refresh","category":"kafka","action":"publish","topic":"user-events","success":true,"trace_id":"b02f1b212b7b4f2122c9597371cd5ae6","span_id":"add6d2cdeaa150cc","trace_flags":"01"}
{"timestamp":"2025-09-26 22:34:18.511","level":"INFO","service":"api-gateway","message":"Auth: token_refresh_success","version":"0.0.1","environment":"development","action":"token_refresh_success","category":"authentication","trace_id":"b02f1b212b7b4f2122c9597371cd5ae6","span_id":"add6d2cdeaa150cc","trace_flags":"01"}
{"timestamp":"2025-09-26 22:42:32.434","level":"INFO","service":"api-gateway","message":"Kafka: publish to user-events success","version":"0.0.1","environment":"development","authMethod":"jwt_refresh","category":"kafka","action":"publish","topic":"user-events","success":true,"trace_id":"bac16b0b3ae707af3c954d79f5b541e7","span_id":"44740751e8d9ff7b","trace_flags":"01"}
{"timestamp":"2025-09-26 22:42:32.435","level":"INFO","service":"api-gateway","message":"Auth: token_refresh_success","version":"0.0.1","environment":"development","action":"token_refresh_success","category":"authentication","trace_id":"bac16b0b3ae707af3c954d79f5b541e7","span_id":"44740751e8d9ff7b","trace_flags":"01"}
{"timestamp":"2025-09-26 22:42:40.136","level":"INFO","service":"api-gateway","message":"Auth: logout_token_extraction","version":"0.0.1","environment":"development","action":"logout_token_extraction","from_body":{"has_access_token":false,"has_refresh_token":false,"has_id_token":false},"from_cookies":{"has_access_token":true,"has_refresh_token":true,"has_id_token":true},"final_tokens":{"has_access_token":true,"has_refresh_token":true,"has_id_token":true},"category":"authentication","trace_id":"05cb5c6b88de0281291e6748e818f893","span_id":"9327ac34c307c946","trace_flags":"01"}
{"timestamp":"2025-09-26 22:42:40.184","level":"INFO","service":"api-gateway","message":"Auth: logout_event_published","version":"0.0.1","environment":"development","action":"logout_event_published","userId":"698afb11-6fd4-4c87-8069-b3e3df197c4b","eventType":"user.logged_out","category":"authentication","trace_id":"05cb5c6b88de0281291e6748e818f893","span_id":"2dea1db950e17486","trace_flags":"01"}
{"timestamp":"2025-09-26 22:42:40.184","level":"INFO","service":"api-gateway","message":"Auth: logout_build_end_session","version":"0.0.1","environment":"development","action":"logout_build_end_session","hasIdToken":true,"idTokenPreview":"eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6IC...","category":"authentication","trace_id":"05cb5c6b88de0281291e6748e818f893","span_id":"9327ac34c307c946","trace_flags":"01"}
{"timestamp":"2025-09-26 22:42:40.185","level":"INFO","service":"api-gateway","message":"Auth: end_session_url_built","version":"0.0.1","environment":"development","action":"end_session_url_built","hasIdToken":true,"postLogoutRedirectUri":"http://localhost:3000/","endSessionUrl":"http://localhost:8090/realms/ai-video-interview/protocol/openid-connect/logout?id_token_hint=eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJxNVBXcGJTTV9KWDR2ekZDT1NWUmttckdqZFJvbWtmUHNwNjJueTFyUXAwIn0.eyJleHAiOjE3NTg5MTYwNTIsImlhdCI6MTc1ODkxNTc1MiwiYXV0aF90aW1lIjoxNzU4OTE0MDM1LCJqdGkiOiJlNDcwOTQ1Yy0xNTQ1LWM0OGQtMmFiYy04ZDUwNzk1OWNhZjUiLCJpc3MiOiJodHRwOi8vbG9jYWxob3N0OjgwOTAvcmVhbG1zL2FpLXZpZGVvLWludGVydmlldyIsImF1ZCI6ImFpLXZpZGVvLWludGVydmlldy1hcHAiLCJzdWIiOiI2OThhZmIxMS02ZmQ0LTRjODctODA2OS1iM2UzZGYxOTdjNGIiLCJ0eXAiOiJJRCIsImF6cCI6ImFpLXZpZGVvLWludGVydmlldy1hcHAiLCJzaWQiOiIwZjllZTU2NS03YzAxLTRkNWEtOTE3MC01ODc5YzlmZWRjYzgiLCJhdF9oYXNoIjoiRjdVcEZITm5zYnRRdVJTNFpGbjBiUSIsImFjciI6IjEiLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwibmFtZSI6IlRlc3QgVXNlciIsInByZWZlcnJlZF91c2VybmFtZSI6InRlc3R1c2VyIiwiZ2l2ZW5fbmFtZSI6IlRlc3QiLCJmYW1pbHlfbmFtZSI6IlVzZXIiLCJlbWFpbCI6InRlc3RAYWktaW50ZXJ2aWV3LmNvbSJ9.Lp9B2RpfltnusUktvfkjF2Esq2sU6W1KIBLrnS-bW8BUI3Y-_PuhkMO86uygWrEfwcpuWI0SgKeRq4yFtoEhiadUpvC7Ze1AB2xi2hPq_NN3T3_Kwexia8Z7ATBYLFMeLIB01Iq1fI6Srh_5yqYHn9F7kpEj-g2DGOSpqbzjpKYaQwXDdgRlY32ftJMyS5Y7H6qkKIJj5J8JPfgD8QnSYPaazaMjAPX919Y6RInRul_8CiVZ3GQjGZ1w0u5mGH4QyOk4U4wsboBr_3PRkpWYHz3wnNYF6GH5ry2KDkRyPc8dO0bwf508FFSfTXJ44AGd29HbhWVp_BaB8OF7QBsGzw&post_logout_redirect_uri=http%3A%2F%2Flocalhost%3A3000%2F","category":"authentication","trace_id":"05cb5c6b88de0281291e6748e818f893","span_id":"9327ac34c307c946","trace_flags":"01"}
{"timestamp":"2025-09-26 22:42:40.186","level":"INFO","service":"api-gateway","message":"Auth: logout_success","version":"0.0.1","environment":"development","action":"logout_success","hasEndSessionUrl":true,"userId":"698afb11-6fd4-4c87-8069-b3e3df197c4b","category":"authentication","trace_id":"05cb5c6b88de0281291e6748e818f893","span_id":"9327ac34c307c946","trace_flags":"01"}
{"timestamp":"2025-09-26 22:42:40.432","level":"WARN","service":"api-gateway","message":"No refresh token found in body or cookies","version":"0.0.1","environment":"development","action":"refresh_token_missing","trace_id":"300a98a819ced17f7256f0b75d9a846c","span_id":"82a7cb91659aee4b","trace_flags":"01"}
{"timestamp":"2025-09-26 22:42:45.213","level":"WARN","service":"api-gateway","message":"No refresh token found in body or cookies","version":"0.0.1","environment":"development","action":"refresh_token_missing","trace_id":"cd1e69945cd21a61e08056e2819a947b","span_id":"a5bd237a9c08089f","trace_flags":"01"}
{"timestamp":"2025-09-26 22:42:51.522","level":"INFO","service":"api-gateway","message":"Auth: login_initiation","version":"0.0.1","environment":"development","action":"login_initiation","redirectUri":"http://localhost:3000/auth/callback","traceId":"903ba6987d776f94a3a6529d7c9b4f44","category":"authentication","trace_id":"903ba6987d776f94a3a6529d7c9b4f44","span_id":"b92822dbd9656220","trace_flags":"01"}
{"timestamp":"2025-09-26 22:49:07.906","level":"INFO","service":"api-gateway","message":"Auth: callback_processing","version":"0.0.1","environment":"development","action":"callback_processing","redirectUri":"http://localhost:3000/auth/callback","code":"present","traceId":"69aa99f3f9104f25e498e0e81494b012","category":"authentication","trace_id":"69aa99f3f9104f25e498e0e81494b012","span_id":"ffe2f11cacbd8d18","trace_flags":"01"}
{"timestamp":"2025-09-26 22:49:07.958","level":"INFO","service":"api-gateway","message":"Kafka: publish to user-events success","version":"0.0.1","environment":"development","userId":"698afb11-6fd4-4c87-8069-b3e3df197c4b","authMethod":"oauth2","traceId":"69aa99f3f9104f25e498e0e81494b012","category":"kafka","action":"publish","topic":"user-events","success":true,"trace_id":"69aa99f3f9104f25e498e0e81494b012","span_id":"ef0bcd2674d679d8","trace_flags":"01"}
